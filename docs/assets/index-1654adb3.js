(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const A of r.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&s(A)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function b(){}function ds(i){return i()}function Kt(){return Object.create(null)}function Je(i){i.forEach(ds)}function kt(i){return typeof i=="function"}function R(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}function Js(i){return Object.keys(i).length===0}function xs(i,...e){if(i==null)return b;const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Os(i){let e;return xs(i,t=>e=t)(),e}function Ls(i){return i&&kt(i.destroy)?i.destroy:b}function a(i,e){i.appendChild(e)}function y(i,e,t){i.insertBefore(e,t||null)}function v(i){i.parentNode&&i.parentNode.removeChild(i)}function f(i){return document.createElement(i)}function k(i){return document.createTextNode(i)}function _(){return k(" ")}function Y(i,e,t,s){return i.addEventListener(e,t,s),()=>i.removeEventListener(e,t,s)}function u(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function Us(i){return Array.from(i.childNodes)}function se(i,e){e=""+e,i.data!==e&&(i.data=e)}function it(i,e){i.value=e??""}function M(i,e,t,s){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,s?"important":"")}function Ks(i,e,{bubbles:t=!1,cancelable:s=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(i,t,s,e),n}function ut(i,e){return new i(e)}let tt;function et(i){tt=i}function Ct(){if(!tt)throw new Error("Function called outside component initialization");return tt}function U(i){Ct().$$.on_mount.push(i)}function st(i){Ct().$$.on_destroy.push(i)}function he(){const i=Ct();return(e,t,{cancelable:s=!1}={})=>{const n=i.$$.callbacks[e];if(n){const r=Ks(e,t,{cancelable:s});return n.slice().forEach(A=>{A.call(i,r)}),!r.defaultPrevented}return!0}}const qe=[],Gt=[];let Fe=[];const qt=[],Gs=Promise.resolve();let gt=!1;function qs(){gt||(gt=!0,Gs.then(hs))}function mt(i){Fe.push(i)}const pt=new Set;let Ke=0;function hs(){if(Ke!==0)return;const i=tt;do{try{for(;Ke<qe.length;){const e=qe[Ke];Ke++,et(e),zs(e.$$)}}catch(e){throw qe.length=0,Ke=0,e}for(et(null),qe.length=0,Ke=0;Gt.length;)Gt.pop()();for(let e=0;e<Fe.length;e+=1){const t=Fe[e];pt.has(t)||(pt.add(t),t())}Fe.length=0}while(qe.length);for(;qt.length;)qt.pop()();gt=!1,pt.clear(),et(i)}function zs(i){if(i.fragment!==null){i.update(),Je(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(mt)}}function Fs(i){const e=[],t=[];Fe.forEach(s=>i.indexOf(s)===-1?e.push(s):t.push(s)),t.forEach(s=>s()),Fe=e}const At=new Set;let Oe;function ps(){Oe={r:0,c:[],p:Oe}}function gs(){Oe.r||Je(Oe.c),Oe=Oe.p}function Me(i,e){i&&i.i&&(At.delete(i),i.i(e))}function Le(i,e,t,s){if(i&&i.o){if(At.has(i))return;At.add(i),Oe.c.push(()=>{At.delete(i),s&&(t&&i.d(1),s())}),i.o(e)}else s&&s()}function Ue(i){i&&i.c()}function Re(i,e,t,s){const{fragment:n,after_update:r}=i.$$;n&&n.m(e,t),s||mt(()=>{const A=i.$$.on_mount.map(ds).filter(kt);i.$$.on_destroy?i.$$.on_destroy.push(...A):Je(A),i.$$.on_mount=[]}),r.forEach(mt)}function He(i,e){const t=i.$$;t.fragment!==null&&(Fs(t.after_update),Je(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Xs(i,e){i.$$.dirty[0]===-1&&(qe.push(i),qs(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function J(i,e,t,s,n,r,A,l=[-1]){const o=tt;et(i);const c=i.$$={fragment:null,ctx:[],props:r,update:b,not_equal:n,bound:Kt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Kt(),dirty:l,skip_bound:!1,root:e.target||o.$$.root};A&&A(c.root);let p=!1;if(c.ctx=t?t(i,e.props||{},(h,d,...m)=>{const g=m.length?m[0]:d;return c.ctx&&n(c.ctx[h],c.ctx[h]=g)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](g),p&&Xs(i,h)),d}):[],c.update(),p=!0,Je(c.before_update),c.fragment=s?s(c.ctx):!1,e.target){if(e.hydrate){const h=Us(e.target);c.fragment&&c.fragment.l(h),h.forEach(v)}else c.fragment&&c.fragment.c();e.intro&&Me(i.$$.fragment),Re(i,e.target,e.anchor,e.customElement),hs()}et(o)}class x{$destroy(){He(this,1),this.$destroy=b}$on(e,t){if(!kt(t))return b;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const n=s.indexOf(t);n!==-1&&s.splice(n,1)}}$set(e){this.$$set&&!Js(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pe=Object.create(null);Pe.open="0";Pe.close="1";Pe.ping="2";Pe.pong="3";Pe.message="4";Pe.upgrade="5";Pe.noop="6";const ot=Object.create(null);Object.keys(Pe).forEach(i=>{ot[Pe[i]]=i});const Ys={type:"error",data:"parser error"},Vs=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ws=typeof ArrayBuffer=="function",js=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer,ms=({type:i,data:e},t,s)=>Vs&&e instanceof Blob?t?s(e):zt(e,s):Ws&&(e instanceof ArrayBuffer||js(e))?t?s(e):zt(new Blob([e]),s):s(Pe[i]+(e||"")),zt=(i,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(i)},Ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ze=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let i=0;i<Ft.length;i++)Ze[Ft.charCodeAt(i)]=i;const $s=i=>{let e=i.length*.75,t=i.length,s,n=0,r,A,l,o;i[i.length-1]==="="&&(e--,i[i.length-2]==="="&&e--);const c=new ArrayBuffer(e),p=new Uint8Array(c);for(s=0;s<t;s+=4)r=Ze[i.charCodeAt(s)],A=Ze[i.charCodeAt(s+1)],l=Ze[i.charCodeAt(s+2)],o=Ze[i.charCodeAt(s+3)],p[n++]=r<<2|A>>4,p[n++]=(A&15)<<4|l>>2,p[n++]=(l&3)<<6|o&63;return c},Zs=typeof ArrayBuffer=="function",vs=(i,e)=>{if(typeof i!="string")return{type:"message",data:ys(i,e)};const t=i.charAt(0);return t==="b"?{type:"message",data:ei(i.substring(1),e)}:ot[t]?i.length>1?{type:ot[t],data:i.substring(1)}:{type:ot[t]}:Ys},ei=(i,e)=>{if(Zs){const t=$s(i);return ys(t,e)}else return{base64:!0,data:i}},ys=(i,e)=>{switch(e){case"blob":return i instanceof ArrayBuffer?new Blob([i]):i;case"arraybuffer":default:return i}},_s=String.fromCharCode(30),ti=(i,e)=>{const t=i.length,s=new Array(t);let n=0;i.forEach((r,A)=>{ms(r,!1,l=>{s[A]=l,++n===t&&e(s.join(_s))})})},si=(i,e)=>{const t=i.split(_s),s=[];for(let n=0;n<t.length;n++){const r=vs(t[n],e);if(s.push(r),r.type==="error")break}return s},bs=4;function V(i){if(i)return ii(i)}function ii(i){for(var e in V.prototype)i[e]=V.prototype[e];return i}V.prototype.on=V.prototype.addEventListener=function(i,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+i]=this._callbacks["$"+i]||[]).push(e),this};V.prototype.once=function(i,e){function t(){this.off(i,t),e.apply(this,arguments)}return t.fn=e,this.on(i,t),this};V.prototype.off=V.prototype.removeListener=V.prototype.removeAllListeners=V.prototype.removeEventListener=function(i,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+i];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+i],this;for(var s,n=0;n<t.length;n++)if(s=t[n],s===e||s.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+i],this};V.prototype.emit=function(i){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+i],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,n=t.length;s<n;++s)t[s].apply(this,e)}return this};V.prototype.emitReserved=V.prototype.emit;V.prototype.listeners=function(i){return this._callbacks=this._callbacks||{},this._callbacks["$"+i]||[]};V.prototype.hasListeners=function(i){return!!this.listeners(i).length};const we=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function ws(i,...e){return e.reduce((t,s)=>(i.hasOwnProperty(s)&&(t[s]=i[s]),t),{})}const ni=we.setTimeout,ri=we.clearTimeout;function ft(i,e){e.useNativeTimers?(i.setTimeoutFn=ni.bind(we),i.clearTimeoutFn=ri.bind(we)):(i.setTimeoutFn=we.setTimeout.bind(we),i.clearTimeoutFn=we.clearTimeout.bind(we))}const Ai=1.33;function oi(i){return typeof i=="string"?li(i):Math.ceil((i.byteLength||i.size)*Ai)}function li(i){let e=0,t=0;for(let s=0,n=i.length;s<n;s++)e=i.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}class ci extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Bs extends V{constructor(e){super(),this.writable=!1,ft(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,s){return super.emitReserved("error",new ci(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=vs(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const Es="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),vt=64,ai={};let Xt=0,nt=0,Yt;function Vt(i){let e="";do e=Es[i%vt]+e,i=Math.floor(i/vt);while(i>0);return e}function ks(){const i=Vt(+new Date);return i!==Yt?(Xt=0,Yt=i):i+"."+Vt(Xt++)}for(;nt<vt;nt++)ai[Es[nt]]=nt;function Cs(i){let e="";for(let t in i)i.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(i[t]));return e}function ui(i){let e={},t=i.split("&");for(let s=0,n=t.length;s<n;s++){let r=t[s].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}let Is=!1;try{Is=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const fi=Is;function Ts(i){const e=i.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||fi))return new XMLHttpRequest}catch{}if(!e)try{return new we[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function di(){}const hi=function(){return new Ts({xdomain:!1}).responseType!=null}();class pi extends Bs{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==s}const t=e&&e.forceBase64;this.supportsBinary=hi&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let s=0;this.polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};si(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ti(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let s="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=ks()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(t==="https"&&Number(this.opts.port)!==443||t==="http"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port);const n=Cs(e),r=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Qe(this.uri(),e)}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(n,r)=>{this.onError("xhr post error",n,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class Qe extends V{constructor(e,t){super(),ft(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.create()}create(){const e=ws(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new Ts(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&t.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{t.readyState===4&&(t.status===200||t.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof t.status=="number"?t.status:0)},0))},t.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=Qe.requestsCount++,Qe.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=di,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Qe.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Qe.requestsCount=0;Qe.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Wt);else if(typeof addEventListener=="function"){const i="onpagehide"in we?"pagehide":"unload";addEventListener(i,Wt,!1)}}function Wt(){for(let i in Qe.requests)Qe.requests.hasOwnProperty(i)&&Qe.requests[i].abort()}const Qs=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),rt=we.WebSocket||we.MozWebSocket,jt=!0,gi="arraybuffer",$t=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class mi extends Bs{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,s=$t?{}:ws(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=jt&&!$t?t?new rt(e,t):new rt(e):new rt(e,t,s)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||gi,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],n=t===e.length-1;ms(s,this.supportsBinary,r=>{const A={};try{jt&&this.ws.send(r)}catch{}n&&Qs(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let s="";this.opts.port&&(t==="wss"&&Number(this.opts.port)!==443||t==="ws"&&Number(this.opts.port)!==80)&&(s=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=ks()),this.supportsBinary||(e.b64=1);const n=Cs(e),r=this.opts.hostname.indexOf(":")!==-1;return t+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(n.length?"?"+n:"")}check(){return!!rt}}const vi={websocket:mi,polling:pi},yi=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yt(i){const e=i,t=i.indexOf("["),s=i.indexOf("]");t!=-1&&s!=-1&&(i=i.substring(0,t)+i.substring(t,s).replace(/:/g,";")+i.substring(s,i.length));let n=yi.exec(i||""),r={},A=14;for(;A--;)r[_i[A]]=n[A]||"";return t!=-1&&s!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=bi(r,r.path),r.queryKey=wi(r,r.query),r}function bi(i,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function wi(i,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,r){n&&(t[n]=r)}),t}let Ps=class ze extends V{constructor(e,t={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(t=e,e=null),e?(e=yt(e),t.hostname=e.host,t.secure=e.protocol==="https"||e.protocol==="wss",t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=yt(t.host).host),ft(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ui(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=bs,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new vi[e](s)}open(){let e;if(this.opts.rememberUpgrade&&ze.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",t=>this.onClose("transport close",t))}probe(e){let t=this.createTransport(e),s=!1;ze.priorWebsocketSuccess=!1;const n=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ze.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(p(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function r(){s||(s=!0,p(),t.close(),t=null)}const A=h=>{const d=new Error("probe error: "+h);d.transport=t.name,r(),this.emitReserved("upgradeError",d)};function l(){A("transport closed")}function o(){A("socket closed")}function c(h){t&&h.name!==t.name&&r()}const p=()=>{t.removeListener("open",n),t.removeListener("error",A),t.removeListener("close",l),this.off("close",o),this.off("upgrading",c)};t.once("open",n),t.once("error",A),t.once("close",l),this.once("close",o),this.once("upgrading",c),t.open()}onOpen(){if(this.readyState="open",ze.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(t+=oi(n)),s>0&&t>this.maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}write(e,t,s){return this.sendPacket("message",e,t,s),this}send(e,t,s){return this.sendPacket("message",e,t,s),this}sendPacket(e,t,s,n){if(typeof t=="function"&&(n=t,t=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}onError(e){ze.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let s=0;const n=e.length;for(;s<n;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}};Ps.protocol=bs;function Bi(i,e="",t){let s=i;t=t||typeof location<"u"&&location,i==null&&(i=t.protocol+"//"+t.host),typeof i=="string"&&(i.charAt(0)==="/"&&(i.charAt(1)==="/"?i=t.protocol+i:i=t.host+i),/^(https?|wss?):\/\//.test(i)||(typeof t<"u"?i=t.protocol+"//"+i:i="https://"+i),s=yt(i)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+e,s.href=s.protocol+"://"+r+(t&&t.port===s.port?"":":"+s.port),s}const Ei=typeof ArrayBuffer=="function",ki=i=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(i):i.buffer instanceof ArrayBuffer,Ss=Object.prototype.toString,Ci=typeof Blob=="function"||typeof Blob<"u"&&Ss.call(Blob)==="[object BlobConstructor]",Ii=typeof File=="function"||typeof File<"u"&&Ss.call(File)==="[object FileConstructor]";function It(i){return Ei&&(i instanceof ArrayBuffer||ki(i))||Ci&&i instanceof Blob||Ii&&i instanceof File}function lt(i,e){if(!i||typeof i!="object")return!1;if(Array.isArray(i)){for(let t=0,s=i.length;t<s;t++)if(lt(i[t]))return!0;return!1}if(It(i))return!0;if(i.toJSON&&typeof i.toJSON=="function"&&arguments.length===1)return lt(i.toJSON(),!0);for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&lt(i[t]))return!0;return!1}function Ti(i){const e=[],t=i.data,s=i;return s.data=_t(t,e),s.attachments=e.length,{packet:s,buffers:e}}function _t(i,e){if(!i)return i;if(It(i)){const t={_placeholder:!0,num:e.length};return e.push(i),t}else if(Array.isArray(i)){const t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=_t(i[s],e);return t}else if(typeof i=="object"&&!(i instanceof Date)){const t={};for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=_t(i[s],e));return t}return i}function Qi(i,e){return i.data=bt(i.data,e),delete i.attachments,i}function bt(i,e){if(!i)return i;if(i&&i._placeholder===!0){if(typeof i.num=="number"&&i.num>=0&&i.num<e.length)return e[i.num];throw new Error("illegal attachments")}else if(Array.isArray(i))for(let t=0;t<i.length;t++)i[t]=bt(i[t],e);else if(typeof i=="object")for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(i[t]=bt(i[t],e));return i}const Pi=5;var N;(function(i){i[i.CONNECT=0]="CONNECT",i[i.DISCONNECT=1]="DISCONNECT",i[i.EVENT=2]="EVENT",i[i.ACK=3]="ACK",i[i.CONNECT_ERROR=4]="CONNECT_ERROR",i[i.BINARY_EVENT=5]="BINARY_EVENT",i[i.BINARY_ACK=6]="BINARY_ACK"})(N||(N={}));class Si{constructor(e){this.replacer=e}encode(e){return(e.type===N.EVENT||e.type===N.ACK)&&lt(e)?this.encodeAsBinary({type:e.type===N.EVENT?N.BINARY_EVENT:N.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===N.BINARY_EVENT||e.type===N.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Ti(e),s=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(s),n}}class Tt extends V{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===N.BINARY_EVENT;s||t.type===N.BINARY_ACK?(t.type=s?N.EVENT:N.ACK,this.reconstructor=new Ni(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(It(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(N[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===N.BINARY_EVENT||s.type===N.BINARY_ACK){const r=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const A=e.substring(r,t);if(A!=Number(A)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(A)}if(e.charAt(t+1)==="/"){const r=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(r,t)}else s.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const r=t+1;for(;++t;){const A=e.charAt(t);if(A==null||Number(A)!=A){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(Tt.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case N.CONNECT:return typeof t=="object";case N.DISCONNECT:return t===void 0;case N.CONNECT_ERROR:return typeof t=="string"||typeof t=="object";case N.EVENT:case N.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="string"||typeof t[0]=="number");case N.ACK:case N.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ni{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Qi(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Di=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Tt,Encoder:Si,get PacketType(){return N},protocol:Pi},Symbol.toStringTag,{value:"Module"}));function ke(i,e,t){return i.on(e,t),function(){i.off(e,t)}}const Mi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ns extends V{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ke(e,"open",this.onopen.bind(this)),ke(e,"packet",this.onpacket.bind(this)),ke(e,"error",this.onerror.bind(this)),ke(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(Mi.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const s={type:N.EVENT,data:t};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const A=this.ids++,l=t.pop();this._registerAckCallback(A,l),s.id=A}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var s;const n=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let A=0;A<this.sendBuffer.length;A++)this.sendBuffer[A].id===e&&this.sendBuffer.splice(A,1);t.call(this,new Error("operation has timed out"))},n);this.acks[e]=(...A)=>{this.io.clearTimeoutFn(r),t.apply(this,[null,...A])}}emitWithAck(e,...t){const s=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((n,r)=>{t.push((A,l)=>s?A?r(A):n(l):n(A)),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...r)=>s!==this._queue[0]?void 0:(n!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:N.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case N.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case N.EVENT:case N.BINARY_EVENT:this.onevent(e);break;case N.ACK:case N.BINARY_ACK:this.onack(e);break;case N.DISCONNECT:this.ondisconnect();break;case N.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...n){s||(s=!0,t.packet({type:N.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:N.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Xe(i){i=i||{},this.ms=i.min||100,this.max=i.max||1e4,this.factor=i.factor||2,this.jitter=i.jitter>0&&i.jitter<=1?i.jitter:0,this.attempts=0}Xe.prototype.duration=function(){var i=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*i);i=Math.floor(e*10)&1?i+t:i-t}return Math.min(i,this.max)|0};Xe.prototype.reset=function(){this.attempts=0};Xe.prototype.setMin=function(i){this.ms=i};Xe.prototype.setMax=function(i){this.max=i};Xe.prototype.setJitter=function(i){this.jitter=i};class wt extends V{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ft(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Xe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||Di;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ps(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=ke(t,"open",function(){s.onopen(),e&&e()}),r=ke(t,"error",A=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",A),e?e(A):s.maybeReconnectOnOpen()});if(this._timeout!==!1){const A=this._timeout;A===0&&n();const l=this.setTimeoutFn(()=>{n(),t.close(),t.emit("error",new Error("timeout"))},A);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(n),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ke(e,"ping",this.onping.bind(this)),ke(e,"data",this.ondata.bind(this)),ke(e,"error",this.onerror.bind(this)),ke(e,"close",this.onclose.bind(this)),ke(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Qs(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Ns(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $e={};function ct(i,e){typeof i=="object"&&(e=i,i=void 0),e=e||{};const t=Bi(i,e.path||"/socket.io"),s=t.source,n=t.id,r=t.path,A=$e[n]&&r in $e[n].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||A;let o;return l?o=new wt(s,e):($e[n]||($e[n]=new wt(s,e)),o=$e[n]),t.query&&!e.query&&(e.query=t.queryKey),o.socket(t.path,e)}Object.assign(ct,{Manager:wt,Socket:Ns,io:ct,connect:ct});const Ge=[];function dt(i,e=b){let t;const s=new Set;function n(l){if(R(i,l)&&(i=l,t)){const o=!Ge.length;for(const c of s)c[1](),Ge.push(c,i);if(o){for(let c=0;c<Ge.length;c+=2)Ge[c][0](Ge[c+1]);Ge.length=0}}}function r(l){n(l(i))}function A(l,o=b){const c=[l,o];return s.add(c),s.size===1&&(t=e(n)||b),l(i),()=>{s.delete(c),s.size===0&&t&&(t(),t=null)}}return{set:n,update:r,subscribe:A}}const K=dt(null),Bt=dt(-1),De=dt(-1),at=dt(["Player 1","Player 2","Player 3","Player 4","Player 5","Player 6"]);function Ri(i){let e,t,s,n,r,A,l,o,c,p,h,d,m;return{c(){e=f("div"),t=f("div"),s=f("p"),s.textContent="DEBUG",n=_(),r=f("button"),r.textContent="go to Pre Mission 1",A=_(),l=f("button"),l.textContent="go to Pre Mission 2",o=_(),c=f("button"),c.textContent="go to Pre Mission 3",p=_(),h=f("button"),h.textContent="Reset all players connection",u(s,"class","card-title"),u(t,"class","card-body"),u(e,"class","card")},m(g,E){y(g,e,E),a(e,t),a(t,s),a(t,n),a(t,r),a(t,A),a(t,l),a(t,o),a(t,c),a(t,p),a(t,h),d||(m=[Y(r,"click",i[2]),Y(l,"click",i[3]),Y(c,"click",i[4]),Y(h,"click",i[5])],d=!0)},p:b,i:b,o:b,d(g){g&&v(e),d=!1,Je(m)}}}function Hi(i){let e;K.subscribe(o=>{e=o});const t=o=>{e.emit("DEBUG_go_to_pre_mission",o)},s=()=>{e.emit("reset_players")};return[t,s,()=>t(1),()=>t(2),()=>t(3),()=>s()]}class Zt extends x{constructor(e){super(),J(this,e,Hi,Ri,R,{})}}function Ji(i){let e;return{c(){e=k("...")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function xi(i){let e=i[2][0]+"",t;return{c(){t=k(e)},m(s,n){y(s,t,n)},p:b,d(s){s&&v(t)}}}function Oi(i){let e;return{c(){e=k("...")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function Li(i){let e=i[2][1]+"",t;return{c(){t=k(e)},m(s,n){y(s,t,n)},p:b,d(s){s&&v(t)}}}function Ui(i){let e;return{c(){e=k("...")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function Ki(i){let e=i[2][2]+"",t;return{c(){t=k(e)},m(s,n){y(s,t,n)},p:b,d(s){s&&v(t)}}}function Gi(i){let e;return{c(){e=k("...")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function qi(i){let e=i[2][3]+"",t;return{c(){t=k(e)},m(s,n){y(s,t,n)},p:b,d(s){s&&v(t)}}}function zi(i){let e;return{c(){e=k("...")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function Fi(i){let e=i[2][4]+"",t;return{c(){t=k(e)},m(s,n){y(s,t,n)},p:b,d(s){s&&v(t)}}}function Xi(i){let e;return{c(){e=k("...")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function Yi(i){let e=i[2][5]+"",t;return{c(){t=k(e)},m(s,n){y(s,t,n)},p:b,d(s){s&&v(t)}}}function Vi(i){let e,t,s,n,r,A,l,o,c,p,h,d,m,g,E,w,B,I,T,D,H,G,j,oe,O,C,Q,Z,pe,ee,ge,fe,de,le,ie,Ce,ne,te,me,ve,Be,ce;function Ee(P,$){return P[1]>0?xi:Ji}let Ie=Ee(i),F=Ie(i);function ye(P,$){return P[1]>1?Li:Oi}let ae=ye(i),S=ae(i);function q(P,$){return P[1]>2?Ki:Ui}let Ae=q(i),z=Ae(i);function Se(P,$){return P[1]>3?qi:Gi}let Te=Se(i),X=Te(i);function _e(P,$){return P[1]>4?Fi:zi}let be=_e(i),re=be(i);function xe(P,$){return P[1]>5?Yi:Xi}let Ne=xe(i),ue=Ne(i);return{c(){e=f("div"),t=f("div"),s=f("div"),s.textContent="Game Code:",n=_(),r=f("div"),A=k(i[0]),l=_(),o=f("button"),o.textContent="Start Game",c=_(),p=f("div"),h=k(`Joined Players:
    `),d=f("div"),m=f("div"),g=_(),E=f("div"),F.c(),w=_(),B=f("div"),I=f("div"),T=_(),D=f("div"),S.c(),H=_(),G=f("div"),j=f("div"),oe=_(),O=f("div"),z.c(),C=_(),Q=f("div"),Z=f("div"),pe=_(),ee=f("div"),X.c(),ge=_(),fe=f("div"),de=f("div"),le=_(),ie=f("div"),re.c(),Ce=_(),ne=f("div"),te=f("div"),me=_(),ve=f("div"),ue.c(),u(s,"class","codeTitle svelte-197gcso"),u(r,"class","gameCode svelte-197gcso"),u(o,"class","startGame svelte-197gcso"),u(t,"class","hostInfo svelte-197gcso"),u(m,"class","pImage svelte-197gcso"),u(m,"id","player1"),M(m,"--height",window.innerHeight),u(E,"class","pName svelte-197gcso"),u(d,"class","player svelte-197gcso"),u(I,"class","pImage svelte-197gcso"),u(I,"id","player2"),M(I,"--height",window.innerHeight),u(D,"class","pName svelte-197gcso"),u(B,"class","player svelte-197gcso"),u(j,"class","pImage svelte-197gcso"),u(j,"id","player3"),M(j,"--height",window.innerHeight),u(O,"class","pName svelte-197gcso"),u(G,"class","player svelte-197gcso"),u(Z,"class","pImage svelte-197gcso"),u(Z,"id","player4"),M(Z,"--height",window.innerHeight),u(ee,"class","pName svelte-197gcso"),u(Q,"class","player svelte-197gcso"),u(de,"class","pImage svelte-197gcso"),u(de,"id","player5"),M(de,"--height",window.innerHeight),u(ie,"class","pName svelte-197gcso"),u(fe,"class","player svelte-197gcso"),u(te,"class","pImage svelte-197gcso"),u(te,"id","player6"),M(te,"--height",window.innerHeight),u(ve,"class","pName svelte-197gcso"),u(ne,"class","player svelte-197gcso"),u(p,"class","joinedPlayers svelte-197gcso"),u(e,"class","waitingPlayers svelte-197gcso"),M(e,"--innerWidth",window.innerWidth)},m(P,$){y(P,e,$),a(e,t),a(t,s),a(t,n),a(t,r),a(r,A),a(t,l),a(t,o),a(e,c),a(e,p),a(p,h),a(p,d),a(d,m),a(d,g),a(d,E),F.m(E,null),a(p,w),a(p,B),a(B,I),a(B,T),a(B,D),S.m(D,null),a(p,H),a(p,G),a(G,j),a(G,oe),a(G,O),z.m(O,null),a(p,C),a(p,Q),a(Q,Z),a(Q,pe),a(Q,ee),X.m(ee,null),a(p,ge),a(p,fe),a(fe,de),a(fe,le),a(fe,ie),re.m(ie,null),a(p,Ce),a(p,ne),a(ne,te),a(ne,me),a(ne,ve),ue.m(ve,null),Be||(ce=Y(o,"click",i[3]),Be=!0)},p(P,[$]){$&1&&se(A,P[0]),Ie===(Ie=Ee(P))&&F?F.p(P,$):(F.d(1),F=Ie(P),F&&(F.c(),F.m(E,null))),ae===(ae=ye(P))&&S?S.p(P,$):(S.d(1),S=ae(P),S&&(S.c(),S.m(D,null))),Ae===(Ae=q(P))&&z?z.p(P,$):(z.d(1),z=Ae(P),z&&(z.c(),z.m(O,null))),Te===(Te=Se(P))&&X?X.p(P,$):(X.d(1),X=Te(P),X&&(X.c(),X.m(ee,null))),be===(be=_e(P))&&re?re.p(P,$):(re.d(1),re=be(P),re&&(re.c(),re.m(ie,null))),Ne===(Ne=xe(P))&&ue?ue.p(P,$):(ue.d(1),ue=Ne(P),ue&&(ue.c(),ue.m(ve,null)))},i:b,o:b,d(P){P&&v(e),F.d(),S.d(),z.d(),X.d(),re.d(),ue.d(),Be=!1,ce()}}}function Wi(i,e,t){let s;K.subscribe(o=>{t(4,s=o)});let n,r=[],A=0;s.on("broadcastPlayerStatus",o=>{for(let c of Object.keys(o))r.includes(o[c].pName)||r.push(o[c].pName);t(1,A=r.length),at.set(r.slice(0,6))});const l=()=>{if(r.length>=6)at.set(r.slice(0,6));else{const o=Array(6-r.length).fill("player");at.set(r.concat(o))}s.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&16&&U(async()=>{for(;!s;)await new Promise(o=>setTimeout(o,100));s.emit("get_session_id"),s.on("post_session_id",o=>{t(0,n=o)})})},[n,A,r,l,s]}class ji extends x{constructor(e){super(),J(this,e,Wi,Vi,R,{})}}function es(i){let e,t,s,n,r;return{c(){e=f("div"),t=f("div"),s=k(i[0]),n=_(),r=f("div"),u(t,"class","name"),u(r,"class","pImage svelte-13u26wp"),u(r,"id",i[2]),u(e,"class","myCharacter svelte-13u26wp")},m(A,l){y(A,e,l),a(e,t),a(t,s),a(e,n),a(e,r)},p(A,l){l&1&&se(s,A[0]),l&4&&u(r,"id",A[2])},d(A){A&&v(e)}}}function $i(i){let e,t,s,n,r,A=i[1]&&es(i);return{c(){e=f("div"),t=f("div"),t.textContent="You are ready!",s=_(),A&&A.c(),n=_(),r=f("div"),r.innerHTML="Press NEXT on the TV<br/> to continue ...",u(t,"class","readyTitle svelte-13u26wp"),u(r,"class","readyCmd svelte-13u26wp"),u(e,"class","preMissionOneContainer svelte-13u26wp"),M(e,"--innerHeight",i[3])},m(l,o){y(l,e,o),a(e,t),a(e,s),A&&A.m(e,null),a(e,n),a(e,r)},p(l,[o]){l[1]?A?A.p(l,o):(A=es(l),A.c(),A.m(e,n)):A&&(A.d(1),A=null)},i:b,o:b,d(l){l&&v(e),A&&A.d()}}}function Zi(i,e,t){he();let s;K.subscribe(c=>{t(4,s=c)});let n,r="None",A=!1,l="player1";De.subscribe(c=>{n=c,t(2,l="player"+(n+1))});const o=window.innerHeight;return s.on("broadcastPlayerStatus",c=>{t(1,A=!0);let h=Object.keys(c)[n];t(0,r=c[h].pName)}),i.$$.update=()=>{i.$$.dirty&16&&U(async()=>{for(;!s;)await new Promise(c=>setTimeout(c,100))})},[r,A,l,o,s]}class Ds extends x{constructor(e){super(),J(this,e,Zi,$i,R,{})}}function ts(i){let e,t,s,n,r;return{c(){e=f("div"),t=f("div"),s=k(i[0]),n=_(),r=f("div"),u(t,"class","name"),u(r,"class","pImage svelte-d383l4"),u(r,"id",i[2]),u(e,"class","myCharacter svelte-d383l4")},m(A,l){y(A,e,l),a(e,t),a(t,s),a(e,n),a(e,r)},p(A,l){l&1&&se(s,A[0]),l&4&&u(r,"id",A[2])},d(A){A&&v(e)}}}function en(i){let e,t,s,n,r,A=i[1]&&ts(i);return{c(){e=f("div"),t=f("div"),t.textContent="You are ready!",s=_(),A&&A.c(),n=_(),r=f("div"),r.innerHTML="Wait for the<br/>game to start ...",u(t,"class","readyTitle svelte-d383l4"),u(r,"class","readyCmd svelte-d383l4"),u(e,"class","readyClientContainer svelte-d383l4"),M(e,"--innerHeight",i[3])},m(l,o){y(l,e,o),a(e,t),a(e,s),A&&A.m(e,null),a(e,n),a(e,r)},p(l,[o]){l[1]?A?A.p(l,o):(A=ts(l),A.c(),A.m(e,n)):A&&(A.d(1),A=null)},i:b,o:b,d(l){l&&v(e),A&&A.d()}}}function tn(i,e,t){const s=he();let n;K.subscribe(p=>{t(4,n=p)});let r,A="None",l=!1,o="player1";De.subscribe(p=>{r=p,t(2,o="player"+(r+1))});const c=window.innerHeight;return n.on("broadcastPlayerStatus",p=>{t(1,l=!0);let d=Object.keys(p)[r];t(0,A=p[d].pName)}),i.$$.update=()=>{i.$$.dirty&16&&U(async()=>{for(;!n;)await new Promise(p=>setTimeout(p,100));n.on("start_pre_mission",()=>{s("changeScene",{new_scene:Ds})})})},[A,l,o,c,n]}class sn extends x{constructor(e){super(),J(this,e,tn,en,R,{})}}function nn(i){let e,t,s,n,r,A,l,o,c,p,h,d,m,g,E,w,B;return{c(){e=f("div"),t=f("div"),s=f("div"),n=f("div"),n.textContent="Enter Game Code:",r=_(),A=f("div"),l=f("input"),o=_(),c=f("div"),p=f("div"),p.textContent="Enter Your Name:",h=_(),d=f("div"),m=f("input"),g=_(),E=f("button"),E.textContent="Join Game",u(n,"class","question svelte-yyfaqp"),u(l,"class","inputbox svelte-yyfaqp"),u(A,"class","answer"),u(s,"class","inputUnit svelte-yyfaqp"),u(p,"class","question svelte-yyfaqp"),u(m,"class","inputbox svelte-yyfaqp"),u(d,"class","answer"),u(c,"class","inputUnit svelte-yyfaqp"),u(E,"class","joinBtn svelte-yyfaqp"),u(t,"class","joining svelte-yyfaqp")},m(I,T){y(I,e,T),a(e,t),a(t,s),a(s,n),a(s,r),a(s,A),a(A,l),it(l,i[0]),a(t,o),a(t,c),a(c,p),a(c,h),a(c,d),a(d,m),it(m,i[1]),a(t,g),a(t,E),w||(B=[Y(l,"input",i[4]),Y(m,"input",i[5]),Y(E,"click",i[2])],w=!0)},p(I,[T]){T&1&&l.value!==I[0]&&it(l,I[0]),T&2&&m.value!==I[1]&&it(m,I[1])},i:b,o:b,d(I){I&&v(e),w=!1,Je(B)}}}function rn(i,e,t){const s=he();let n;K.subscribe(h=>{t(3,n=h)});let r,A;const l=()=>{n.emit("join_as",{role:0}),n.on("success_join_as_emcee",()=>{Bt.set(0),s("changeScene",{new_scene:ji})}),n.on("error",h=>console.log(`Error: ${h}`))},o=()=>{n.emit("join_as",{role:1,sessionId:r,playerName:A}),n.on("success_join_as_player",h=>{Bt.set(1),De.set(h.player_number),s("changeScene",{new_scene:sn})})};function c(){r=this.value,t(0,r)}function p(){A=this.value,t(1,A)}return i.$$.update=()=>{i.$$.dirty&8&&U(async()=>{for(;!n;)await new Promise(h=>setTimeout(h,100));navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/iPhone/i)||l()})},[r,A,o,n,c,p]}class An extends x{constructor(e){super(),J(this,e,rn,nn,R,{})}}function on(i){let e,t,s,n,r,A;return{c(){e=f("div"),t=f("div"),s=_(),n=f("div"),u(t,"class","missionCard svelte-86a2ou"),u(n,"class","nextBtn svelte-86a2ou"),u(e,"class","preMissionOneTVContainer svelte-86a2ou")},m(l,o){y(l,e,o),a(e,t),a(e,s),a(e,n),r||(A=Y(n,"click",i[0]),r=!0)},p:b,i:b,o:b,d(l){l&&v(e),r=!1,A()}}}function ln(i,e,t){let s;K.subscribe(r=>{t(1,s=r)});const n=()=>{s.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&2&&U(async()=>{for(;!s;)await new Promise(r=>setTimeout(r,100));s.emit("get_session_id"),s.on("post_session_id",r=>{})})},[n,s]}class cn extends x{constructor(e){super(),J(this,e,ln,on,R,{})}}function an(i){let e,t,s,n,r;return{c(){e=f("p"),e.innerHTML="If you are the iPhone user,<br/>get permission first<br/>",t=_(),s=f("button"),s.textContent="Get Permission",u(e,"class","permissionInstr svelte-1tr9aby"),u(s,"class","permissionBtn svelte-1tr9aby")},m(A,l){y(A,e,l),y(A,t,l),y(A,s,l),n||(r=Y(s,"click",gn),n=!0)},p:b,d(A){A&&v(e),A&&v(t),A&&v(s),n=!1,r()}}}function un(i){let e;return{c(){e=f("div"),e.textContent="You are ready!",u(e,"class","readyTitle svelte-1tr9aby")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function fn(i){let e;return{c(){e=f("div"),e.textContent="You've failed :(",u(e,"class","failTitle svelte-1tr9aby")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function ss(i){let e,t,s,n,r;return{c(){e=f("div"),t=f("div"),s=k(i[0]),n=_(),r=f("div"),u(t,"class","name"),u(r,"class","pImage svelte-1tr9aby"),u(r,"id",i[3]),u(e,"class","myCharacter svelte-1tr9aby")},m(A,l){y(A,e,l),a(e,t),a(t,s),a(e,n),a(e,r)},p(A,l){l&1&&se(s,A[0]),l&8&&u(r,"id",A[3])},d(A){A&&v(e)}}}function dn(i){let e,t,s;return{c(){e=k("Better luck"),t=f("br"),s=k(" next time")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function hn(i){let e,t,s;return{c(){e=k("Press NEXT on the TV"),t=f("br"),s=k(" to continue ...")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function pn(i){let e,t,s,n;function r(d,m){return d[1]==!1?fn:d[4]==="Android"?un:an}let A=r(i),l=A(i),o=i[2]&&ss(i);function c(d,m){return d[1]==!0?hn:dn}let p=c(i),h=p(i);return{c(){e=f("div"),l.c(),t=_(),o&&o.c(),s=_(),n=f("div"),h.c(),u(n,"class","readyCmd svelte-1tr9aby"),u(e,"class","preMissionOneContainer svelte-1tr9aby"),M(e,"--innerHeight",i[5])},m(d,m){y(d,e,m),l.m(e,null),a(e,t),o&&o.m(e,null),a(e,s),a(e,n),h.m(n,null)},p(d,[m]){A===(A=r(d))&&l?l.p(d,m):(l.d(1),l=A(d),l&&(l.c(),l.m(e,t))),d[2]?o?o.p(d,m):(o=ss(d),o.c(),o.m(e,s)):o&&(o.d(1),o=null),p!==(p=c(d))&&(h.d(1),h=p(d),h&&(h.c(),h.m(n,null)))},i:b,o:b,d(d){d&&v(e),l.d(),o&&o.d(),h.d()}}}function gn(){typeof DeviceMotionEvent.requestPermission=="function"?DeviceMotionEvent.requestPermission().then(i=>{status=i,i=="granted"&&window.addEventListener("devicemotion",e=>{})}).catch(console.error):DeviceOrientationEvent.requestPermission().then(i=>{status=i,i=="granted"&&window.addEventListener("deviceorientation",e=>{})}).catch(console.error)}function mn(i,e,t){he();let s;K.subscribe(h=>{t(6,s=h)});let n,r="None",A=!0,l=!1,o="player1";De.subscribe(h=>{n=h,t(3,o="player"+(n+1))});const c=window.innerHeight;let p="Undefined";return s.on("broadcastPlayerStatus",h=>{t(2,l=!0);let m=Object.keys(h)[n];t(0,r=h[m].pName),t(1,A=h[m].alive==0)}),i.$$.update=()=>{i.$$.dirty&64&&U(async()=>{for(;!s;)await new Promise(h=>setTimeout(h,100));navigator.userAgent.match(/Android/i)?t(4,p="Android"):navigator.userAgent.match(/iPhone/i)?t(4,p="iPhone"):t(4,p="We only support Android and iOS(iPhone)")})},[r,A,l,o,p,c,s]}class Ms extends x{constructor(e){super(),J(this,e,mn,pn,R,{})}}function vn(i){let e,t,s,n,r,A;return{c(){e=f("div"),t=f("div"),s=_(),n=f("div"),u(t,"class","missionCard svelte-1y589fl"),u(n,"class","nextBtn svelte-1y589fl"),u(e,"class","preMissionTwoTVContainer svelte-1y589fl")},m(l,o){y(l,e,o),a(e,t),a(e,s),a(e,n),r||(A=Y(n,"click",i[0]),r=!0)},p:b,i:b,o:b,d(l){l&&v(e),r=!1,A()}}}function yn(i,e,t){let s;K.subscribe(r=>{t(1,s=r)});const n=()=>{s.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&2&&U(async()=>{for(;!s;)await new Promise(r=>setTimeout(r,100));s.emit("get_session_id"),s.on("post_session_id",r=>{})})},[n,s]}class _n extends x{constructor(e){super(),J(this,e,yn,vn,R,{})}}function bn(i){let e;return{c(){e=f("div"),e.textContent="You are ready!",u(e,"class","readyTitle svelte-qpz3xk")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function wn(i){let e;return{c(){e=f("div"),e.textContent="You've failed :(",u(e,"class","failTitle svelte-qpz3xk")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function is(i){let e,t,s,n,r;return{c(){e=f("div"),t=f("div"),s=k(i[0]),n=_(),r=f("div"),u(t,"class","name"),u(r,"class","pImage svelte-qpz3xk"),u(r,"id",i[3]),u(e,"class","myCharacter svelte-qpz3xk")},m(A,l){y(A,e,l),a(e,t),a(t,s),a(e,n),a(e,r)},p(A,l){l&1&&se(s,A[0]),l&8&&u(r,"id",A[3])},d(A){A&&v(e)}}}function Bn(i){let e,t,s;return{c(){e=k("Better luck"),t=f("br"),s=k(" next time")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function En(i){let e,t,s;return{c(){e=k("Press NEXT on the TV"),t=f("br"),s=k(" to continue ...")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function kn(i){let e,t,s,n;function r(d,m){return d[1]==!1?wn:bn}let A=r(i),l=A(i),o=i[2]&&is(i);function c(d,m){return d[1]==!0?En:Bn}let p=c(i),h=p(i);return{c(){e=f("div"),l.c(),t=_(),o&&o.c(),s=_(),n=f("div"),h.c(),u(n,"class","readyCmd svelte-qpz3xk"),u(e,"class","preMissionThreeContainer svelte-qpz3xk"),M(e,"--innerHeight",i[4])},m(d,m){y(d,e,m),l.m(e,null),a(e,t),o&&o.m(e,null),a(e,s),a(e,n),h.m(n,null)},p(d,[m]){A!==(A=r(d))&&(l.d(1),l=A(d),l&&(l.c(),l.m(e,t))),d[2]?o?o.p(d,m):(o=is(d),o.c(),o.m(e,s)):o&&(o.d(1),o=null),p!==(p=c(d))&&(h.d(1),h=p(d),h&&(h.c(),h.m(n,null)))},i:b,o:b,d(d){d&&v(e),l.d(),o&&o.d(),h.d()}}}function Cn(i,e,t){he();let s;K.subscribe(p=>{t(5,s=p)});let n,r="None",A=!0,l=!1,o="player1";De.subscribe(p=>{n=p,t(3,o="player"+(n+1))});const c=window.innerHeight;return s.on("broadcastPlayerStatus",p=>{t(2,l=!0);let d=Object.keys(p)[n];t(0,r=p[d].pName),t(1,A=p[d].alive==0)}),i.$$.update=()=>{i.$$.dirty&32&&U(async()=>{for(;!s;)await new Promise(p=>setTimeout(p,100))})},[r,A,l,o,c,s]}class Et extends x{constructor(e){super(),J(this,e,Cn,kn,R,{})}}function In(i){let e,t,s,n,r,A;return{c(){e=f("div"),t=f("div"),s=_(),n=f("div"),u(t,"class","missionCard svelte-np3qo8"),u(n,"class","nextBtn svelte-np3qo8"),u(e,"class","preMissionThreeTVContainer svelte-np3qo8")},m(l,o){y(l,e,o),a(e,t),a(e,s),a(e,n),r||(A=Y(n,"click",i[0]),r=!0)},p:b,i:b,o:b,d(l){l&&v(e),r=!1,A()}}}function Tn(i,e,t){let s;K.subscribe(r=>{t(1,s=r)});const n=()=>{s.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&2&&U(async()=>{for(;!s;)await new Promise(r=>setTimeout(r,100));s.emit("get_session_id"),s.on("post_session_id",r=>{})})},[n,s]}class Qn extends x{constructor(e){super(),J(this,e,Tn,In,R,{})}}function Pn(i){let e;return{c(){e=k("You failed :(")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function Sn(i){let e;return{c(){e=k("You survived!")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function ns(i){let e,t,s,n,r;return{c(){e=f("div"),t=f("div"),s=k(i[0]),n=_(),r=f("div"),u(t,"class","name"),u(r,"class","pImage svelte-1teyf0y"),u(r,"id",i[2]),u(e,"class","myCharacter svelte-1teyf0y")},m(A,l){y(A,e,l),a(e,t),a(t,s),a(e,n),a(e,r)},p(A,l){l&1&&se(s,A[0]),l&4&&u(r,"id",A[2])},d(A){A&&v(e)}}}function Nn(i){let e,t,s;return{c(){e=k("Better luck"),t=f("br"),s=k(" next time")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function Dn(i){let e,t,s;return{c(){e=k("Wait for the next"),t=f("br"),s=k(" game to start")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function Mn(i){let e,t,s,n,r;function A(m,g){return m[3]==!0?Sn:Pn}let l=A(i),o=l(i),c=i[1]&&ns(i);function p(m,g){return m[3]==!0?Dn:Nn}let h=p(i),d=h(i);return{c(){e=f("div"),t=f("div"),o.c(),s=_(),c&&c.c(),n=_(),r=f("div"),d.c(),u(t,"class","readyTitle svelte-1teyf0y"),u(r,"class","readyCmd svelte-1teyf0y"),u(e,"class","postMissionOneContainer svelte-1teyf0y"),M(e,"--innerHeight",i[4])},m(m,g){y(m,e,g),a(e,t),o.m(t,null),a(e,s),c&&c.m(e,null),a(e,n),a(e,r),d.m(r,null)},p(m,[g]){l!==(l=A(m))&&(o.d(1),o=l(m),o&&(o.c(),o.m(t,null))),m[1]?c?c.p(m,g):(c=ns(m),c.c(),c.m(e,n)):c&&(c.d(1),c=null),h!==(h=p(m))&&(d.d(1),d=h(m),d&&(d.c(),d.m(r,null)))},i:b,o:b,d(m){m&&v(e),o.d(),c&&c.d(),d.d()}}}function Rn(i,e,t){const s=he();let n;K.subscribe(h=>{t(5,n=h)});let r,A="None",l=!1,o="player1",c=!0;De.subscribe(h=>{r=h,t(2,o="player"+(r+1))});const p=window.innerHeight;return n.on("broadcastPlayerStatus",h=>{t(1,l=!0);let m=Object.keys(h)[r];t(0,A=h[m].pName),t(3,c=h[m].alive==0)}),i.$$.update=()=>{i.$$.dirty&32&&U(async()=>{for(;!n;)await new Promise(h=>setTimeout(h,100));n.on("start_pre_mission",()=>{s("changeScene",{new_scene:Ms})})})},[A,l,o,c,p,n]}class Rs extends x{constructor(e){super(),J(this,e,Rn,Mn,R,{})}}function Hn(i){let e,t,s,n,r,A,l,o,c,p,h;return{c(){e=f("div"),t=f("div"),t.innerHTML="Tap the boxes<br/> alternately<br/> to run",s=_(),n=f("div"),r=f("div"),l=_(),o=f("div"),u(t,"class","clientTitle svelte-8mehlf"),u(r,"class","leftbox svelte-8mehlf"),u(r,"id",A=i[0]?"thisTime":"nextTime"),u(o,"class","rightbox svelte-8mehlf"),u(o,"id",c=i[0]?"nextTime":"thisTime"),u(n,"class","stepper svelte-8mehlf"),u(e,"class","stepClientContainer svelte-8mehlf"),M(e,"--innerHeight",i[1])},m(d,m){y(d,e,m),a(e,t),a(e,s),a(e,n),a(n,r),a(n,l),a(n,o),p||(h=[Y(r,"touchstart",i[2]),Y(o,"touchstart",i[3])],p=!0)},p(d,[m]){m&1&&A!==(A=d[0]?"thisTime":"nextTime")&&u(r,"id",A),m&1&&c!==(c=d[0]?"nextTime":"thisTime")&&u(o,"id",c)},i:b,o:b,d(d){d&&v(e),p=!1,Je(h)}}}function Jn(i,e,t){const s=he();let n;K.subscribe(d=>{t(4,n=d)});let r;De.subscribe(d=>{t(5,r=d)});let A,l=0,o=!0;const c=window.innerHeight,p=d=>{d.preventDefault(),o&&(l+=1,n.emit("stepOn",l),t(0,o=!1))},h=d=>{d.preventDefault(),o||(l+=1,n.emit("stepOn",l),t(0,o=!0))};return i.$$.update=()=>{i.$$.dirty&48&&U(async()=>{for(;!n;)await new Promise(d=>setTimeout(d,100));n.on("get_mission_result",()=>{n.emit("post_mission_result",{player_number:r,stepCount:A})}),n.on("start_post_mission",()=>{s("changeScene",{new_scene:Rs})}),n.on("getMyStepCounts",d=>{l=d})})},[o,c,p,h,n,r]}class xn extends x{constructor(e){super(),J(this,e,Jn,Hn,R,{})}}const On="modulepreload",Ln=function(i){return"/id311-blob-frontend/"+i},rs={},Un=function(e,t,s){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=Ln(r),r in rs)return;rs[r]=!0;const A=r.endsWith(".css"),l=A?'[rel="stylesheet"]':"";if(!!s)for(let p=n.length-1;p>=0;p--){const h=n[p];if(h.href===r&&(!A||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const c=document.createElement("link");if(c.rel=A?"stylesheet":On,A||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),A)return new Promise((p,h)=>{c.addEventListener("load",p),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};function Kn(i){let e,t,s;return{c(){e=f("div"),u(e,"style",i[0]),u(e,"class","m-0")},m(n,r){y(n,e,r),t||(s=Ls(i[1].call(null,e)),t=!0)},p(n,[r]){r&1&&u(e,"style",n[0])},i:b,o:b,d(n){n&&v(e),t=!1,s()}}}function Gn(i,e){return e.forEach(([t,s])=>i[t]=s),i}function qn(i,e,t){let{target:s=void 0}=e,{sketch:n=void 0}=e,{parentDivStyle:r="display: block;"}=e,{debug:A=!1}=e,l;const o=he(),c={ref(){o("ref",s)},instance(){o("instance",l)}};function p(h){return t(2,s=h),{destroy(){t(2,s=void 0)}}}return U(async()=>{const h=await Un(()=>import("./p5.min-28a2b21a.js").then(E=>E.p),[]),{default:d}=h,g=Object.entries(h).filter(([E,w])=>w instanceof Function&&E[0]!=="_"&&E!=="default");A&&console.log("available p5 native classes",g),l=new d(E=>(E=Gn(E,g),A&&console.log("p5 instance",E),window._p5Instance=E,n(E)),s),c.ref(),c.instance()}),i.$$set=h=>{"target"in h&&t(2,s=h.target),"sketch"in h&&t(3,n=h.sketch),"parentDivStyle"in h&&t(0,r=h.parentDivStyle),"debug"in h&&t(4,A=h.debug)},[r,p,s,n,A]}class Qt extends x{constructor(e){super(),J(this,e,qn,Kn,R,{target:2,sketch:3,parentDivStyle:0,debug:4})}}const zn="/id311-blob-frontend/assets/boat-26978e3f.png",Fn="/id311-blob-frontend/assets/player1_back-6e8a06c6.gif",Xn="/id311-blob-frontend/assets/player2_back-d731d73c.gif",Yn="/id311-blob-frontend/assets/player3_back-f06d8562.gif",Vn="/id311-blob-frontend/assets/player4_back-cf22fe89.gif",Wn="/id311-blob-frontend/assets/player5_back-ec558761.gif",jn="/id311-blob-frontend/assets/player6_back-5b8b0bc8.gif";function $n(i){let e,t,s,n,r,A,l;return t=new Qt({props:{sketch:i[1]}}),{c(){e=f("div"),Ue(t.$$.fragment),s=_(),n=f("button"),u(e,"class","missionOneTVContainer svelte-16iib5p")},m(o,c){y(o,e,c),Re(t,e,null),a(e,s),a(e,n),r=!0,A||(l=Y(n,"click",i[2]),A=!0)},p:b,i(o){r||(Me(t.$$.fragment,o),r=!0)},o(o){Le(t.$$.fragment,o),r=!1},d(o){o&&v(e),He(t),A=!1,l()}}}const As=10;function Zn(i,e,t){const s=window.innerWidth-As,n=window.innerHeight-As,r=s/16,A=r*2.5,l=n/200;let o=[];const c=[];let p;K.subscribe(g=>{t(0,p=g)}),st(()=>{p.off("broadcastPlayerStatus")}),console.log(o);const h={},d=g=>{let E,w;g.preload=function(){h.boat=g.loadImage(zn),h.players=[],h.players.push(g.createImg(Fn)),h.players.push(g.createImg(Xn)),h.players.push(g.createImg(Yn)),h.players.push(g.createImg(Vn)),h.players.push(g.createImg(Wn)),h.players.push(g.createImg(jn))},g.setup=function(){g.createCanvas(s,n),E=h.boat.height/h.boat.width,w=r*2.5*E+r},g.draw=function(){g.clear(),g.noStroke();for(let B=0;B<6;B++)c.includes(B)||(n-r-o[B]*l<=r*2.5*E+r&&c.push(B),p.emit("playersReach",c));g.imageMode(g.CENTER);for(let B=0;B<2;B++)g.image(h.boat,s/3*(B+1),A*E,A,A*E);g.stroke("#DD6363"),g.strokeWeight(n/100),g.drawingContext.setLineDash([s/100,s/70]),g.line(0,w,s,w);for(let B=0;B<6;B++){g.textFont("Courier New"),g.textSize(r/3.5),g.textAlign(g.CENTER),g.textStyle(g.BOLD);const I=Os(at)[B];if(c.includes(B)){let T=-1,D=c.indexOf(B);D%2&&(T=1),g.imageMode(g.CENTER),h.players[B].size(r,r),h.players[B].position(s/3*(Math.floor(D/2)+1)+T*r/1.5-r/2.5,A*E*.45),g.noStroke(),g.fill("#000000"),g.text(I,s/3*(Math.floor(D/2)+1)+T*r/1.5+r/15,A*E*.75-r/2.5)}else g.imageMode(g.CENTER),h.players[B].size(r,r),h.players[B].position(s/7*(B+1)-r/2,n-r*1.5-(o[B]??0)*l),g.noStroke(),g.fill("#000000"),g.text(I,s/7*(B+1),n-r*1.6-(o[B]??0)*l)}}},m=()=>{p.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&1&&U(async()=>{for(;!p;)await new Promise(g=>setTimeout(g,100));p.on("broadcastStepCounts",g=>{console.log(g),o=g})})},[p,d,m]}class er extends x{constructor(e){super(),J(this,e,Zn,$n,R,{})}}function tr(i){let e;return{c(){e=k("You failed :(")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function sr(i){let e;return{c(){e=k("You survived!")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function os(i){let e,t,s,n,r;return{c(){e=f("div"),t=f("div"),s=k(i[0]),n=_(),r=f("div"),u(t,"class","name"),u(r,"class","pImage svelte-1qo8vtt"),u(r,"id",i[2]),u(e,"class","myCharacter svelte-1qo8vtt")},m(A,l){y(A,e,l),a(e,t),a(t,s),a(e,n),a(e,r)},p(A,l){l&1&&se(s,A[0]),l&4&&u(r,"id",A[2])},d(A){A&&v(e)}}}function ir(i){let e,t,s;return{c(){e=k("Better luck"),t=f("br"),s=k(" next time")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function nr(i){let e,t,s;return{c(){e=k("Wait for the next"),t=f("br"),s=k(" game to start")},m(n,r){y(n,e,r),y(n,t,r),y(n,s,r)},d(n){n&&v(e),n&&v(t),n&&v(s)}}}function rr(i){let e,t,s,n,r;function A(m,g){return m[3]==!0?sr:tr}let l=A(i),o=l(i),c=i[1]&&os(i);function p(m,g){return m[3]==!0?nr:ir}let h=p(i),d=h(i);return{c(){e=f("div"),t=f("div"),o.c(),s=_(),c&&c.c(),n=_(),r=f("div"),d.c(),u(t,"class","readyTitle svelte-1qo8vtt"),u(r,"class","readyCmd svelte-1qo8vtt"),u(e,"class","postMissionOneContainer svelte-1qo8vtt"),M(e,"--innerHeight",i[4])},m(m,g){y(m,e,g),a(e,t),o.m(t,null),a(e,s),c&&c.m(e,null),a(e,n),a(e,r),d.m(r,null)},p(m,[g]){l!==(l=A(m))&&(o.d(1),o=l(m),o&&(o.c(),o.m(t,null))),m[1]?c?c.p(m,g):(c=os(m),c.c(),c.m(e,n)):c&&(c.d(1),c=null),h!==(h=p(m))&&(d.d(1),d=h(m),d&&(d.c(),d.m(r,null)))},i:b,o:b,d(m){m&&v(e),o.d(),c&&c.d(),d.d()}}}function Ar(i,e,t){const s=he();let n;K.subscribe(h=>{t(5,n=h)});let r,A="None",l=!1,o="player1",c=!0;De.subscribe(h=>{r=h,t(2,o="player"+(r+1))});const p=window.innerHeight;return n.on("broadcastPlayerStatus",h=>{t(1,l=!0);let m=Object.keys(h)[r];t(0,A=h[m].pName),t(3,c=h[m].alive==0)}),n.on("start_post_mission",()=>{s("changeScene",{new_scene:Et})}),i.$$.update=()=>{i.$$.dirty&32&&U(async()=>{for(;!n;)await new Promise(h=>setTimeout(h,100));n.on("start_pre_mission",()=>{s("changeScene",{new_scene:Et})})})},[A,l,o,c,p,n]}class ht extends x{constructor(e){super(),J(this,e,Ar,rr,R,{})}}function ls(i){let e,t,s,n;return{c(){e=f("div"),t=f("div"),t.textContent="your partner",s=_(),n=f("div"),u(t,"class","pDesc svelte-2bsim7"),u(n,"class","pImage svelte-2bsim7"),u(n,"id",i[1]),u(e,"class","partnerCharacter svelte-2bsim7")},m(r,A){y(r,e,A),a(e,t),a(e,s),a(e,n)},p(r,A){A&2&&u(n,"id",r[1])},d(r){r&&v(e)}}}function or(i){let e,t,s,n,r,A,l,o=i[0]&&ls(i);return{c(){e=f("div"),t=f("div"),t.innerHTML=`Tilt your phone<br/> to move the slider,<br/>
    tap screen<br/> to lockpick`,s=_(),n=f("div"),n.textContent=`${lr}/5 lockpick attempt(s) left`,r=_(),o&&o.c(),u(t,"class","clientTitle svelte-2bsim7"),u(n,"class","attemtDesc svelte-2bsim7"),u(e,"class","tiltContainer svelte-2bsim7"),M(e,"--innerHeight",i[2])},m(c,p){y(c,e,p),a(e,t),a(e,s),a(e,n),a(e,r),o&&o.m(e,null),A||(l=Y(e,"touchstart",i[3],{passive:!0}),A=!0)},p(c,[p]){c[0]?o?o.p(c,p):(o=ls(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:b,o:b,d(c){c&&v(e),o&&o.d(),A=!1,l()}}}let lr=5;function cr(i,e,t){const s=he();let n;K.subscribe(g=>{t(4,n=g)});let r=0,A,l=1,o=!1,c="player1";const p=window.innerHeight;n.on("myRolePartner",g=>{t(1,c="player"+(g+1))}),n.on("start_post_mission",()=>{s("changeScene",{new_scene:ht})}),st(()=>{window.removeEventListener("devicemotion",h),clearInterval(A)});function h(g){r=g.accelerationIncludingGravity.x}function d(){n.emit("sendAcceleration",r*l)}function m(){n.emit("submitAnswer")}return i.$$.update=()=>{i.$$.dirty&16&&U(async()=>{for(;!n;)await new Promise(g=>setTimeout(g,100));navigator.userAgent.match(/Android/i)?l=-1:navigator.userAgent.match(/iPhone/i),window.DeviceMotionEvent?(window.addEventListener("devicemotion",h),A=setInterval(d,200)):window.DeviceOrientationEvent&&(window.addEventListener("deviceorientation",h),A=setInterval(d,200)),n.on("broadcastPlayerStatus",g=>{t(0,o=!0)})})},[o,c,p,m,n]}class ar extends x{constructor(e){super(),J(this,e,cr,or,R,{})}}function ur(i){let e;return{c(){e=f("div"),u(e,"class","orb svelte-lwtklj"),u(e,"id","red")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function fr(i){let e;return{c(){e=f("div"),u(e,"class","orb svelte-lwtklj"),u(e,"id","green")},m(t,s){y(t,e,s)},d(t){t&&v(e)}}}function cs(i){let e,t,s,n;return{c(){e=f("div"),t=f("div"),t.textContent="your partner",s=_(),n=f("div"),u(t,"class","pDesc svelte-lwtklj"),u(n,"class","pImage svelte-lwtklj"),u(n,"id",i[2]),u(e,"class","partnerCharacter svelte-lwtklj")},m(r,A){y(r,e,A),a(e,t),a(e,s),a(e,n)},p(r,A){A&4&&u(n,"id",r[2])},d(r){r&&v(e)}}}function dr(i){let e,t,s,n;function r(c,p){return c[0]==="Ding!"?fr:ur}let A=r(i),l=A(i),o=i[1]&&cs(i);return{c(){e=f("div"),t=f("div"),t.innerHTML="Tell your partner<br/> the location <br/>when the orb <br/>turns green",s=_(),l.c(),n=_(),o&&o.c(),u(t,"class","clientTitle svelte-lwtklj"),u(e,"class","tiltContainer svelte-lwtklj"),M(e,"--innerHeight",i[3])},m(c,p){y(c,e,p),a(e,t),a(e,s),l.m(e,null),a(e,n),o&&o.m(e,null)},p(c,[p]){A!==(A=r(c))&&(l.d(1),l=A(c),l&&(l.c(),l.m(e,n))),c[1]?o?o.p(c,p):(o=cs(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:b,o:b,d(c){c&&v(e),l.d(),o&&o.d()}}}function hr(i,e,t){const s=he();let n;K.subscribe(p=>{t(4,n=p)});let r="No ding",A=!1,l="player1";const o=window.innerHeight;n.on("myRolePartner",p=>{t(2,l="player"+(p+1))}),n.on("start_post_mission",()=>{s("changeScene",{new_scene:ht})});function c(){t(0,r="Ding!"),setTimeout(()=>{t(0,r="No ding")},1e3)}return i.$$.update=()=>{i.$$.dirty&16&&U(async()=>{for(;!n;)await new Promise(p=>setTimeout(p,100));n.on("alertAnswer",()=>{c()}),n.on("broadcastPlayerStatus",p=>{t(1,A=!0)})})},[r,A,l,o,n]}class pr extends x{constructor(e){super(),J(this,e,hr,dr,R,{})}}function gr(i){let e,t;return{c(){e=f("div"),t=f("div"),t.innerHTML="Let&#39;s watch<br/> other players&#39;<br/>fantastic play",u(t,"class","clientTitle svelte-c7h1j"),u(e,"class","stepClientContainer svelte-c7h1j"),M(e,"--innerHeight",i[0])},m(s,n){y(s,e,n),a(e,t)},p:b,i:b,o:b,d(s){s&&v(e)}}}function mr(i,e,t){const s=he();let n;K.subscribe(A=>{t(1,n=A)});const r=window.innerHeight;return n.on("start_post_mission",()=>{s("changeScene",{new_scene:ht})}),i.$$.update=()=>{i.$$.dirty&2&&U(async()=>{for(;!n;)await new Promise(A=>setTimeout(A,100));n.on("missionTwoRole",A=>{switch(A){case 0:s("changeScene",{new_scene:ar});break;case 1:s("changeScene",{new_scene:pr});break}})})},[r,n]}class vr extends x{constructor(e){super(),J(this,e,mr,gr,R,{})}}const yr="/id311-blob-frontend/assets/box_open-0876ea21.png",_r="/id311-blob-frontend/assets/box_closed-f74b329e.png",br="data:image/png;base64,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",wr="data:image/png;base64,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",Br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXgAAAF4CAYAAABeneKmAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAf5SURBVHgB7d0/bhv5GYDhHwUKlgo7ggs3boQ9wZYubIDxCbInyJ8b5AR7hBzBzkU2AmwYKvcEa6cQ4MKF4UaWJZEhkxPEGmHJl88DEKNqMBJnXg2+5psN9taLFy9erw9/HuyTV2/evPnbYC8cDACSBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGi5oOdsFgsTr5+/XoypvWHwb45efbs2emY0NHR0eezs7PPg60j8Dvi9vb2T4eHh68G3M1P6/vopzGd1bdv3zZLvF8Pto4RDUCUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUnaz3YLMg++bm5scxodls9uNqtRrbbn2Nv64PFjBP42TzvY/tNpvP56fPnz9fjAmtz/mrRd53J/D3YBP39YP5rzGhXYj72uYi//727duzwZ2sXxI299Ef1z/+Mrbc+t78eX2//zyms1r/7i/Xx7PBnRjRAEQJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0TZybrfztafD2NCy+XSouSJzOfz97e3t6/HhFar1elsNlsM9oLA77F1PP757t2714Otc3Z2tjl8WH/+OiayWeS9/s4351sM9oIRDUCUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPEDUfOy5xWJxcnt7+48xrZMB8Dvb+8CP/8X4LwMgxogGIGo29tx6RHO6HtG8H0DZ6vr6+ofz8/MPY494gweIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gKidW/ixWCymvubNwo/fBlD234UfR0dH/x4TOjs7W40ttnM7Wdcx/mVMaDabWZANfbPDw8NX636MCW3i/nJssV1cur0YE1qttvofMDCdxZjW1sfDDB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gahd3sm694+Pj8eTJkwF8n48fP46rq6vB3Qj8PTk8PBzA9zk4MFyYgr8iQJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPEDUfMCWu76+Hrvg8PBwwDYReLbexcXFuLm5GdtsPp+P09PTAdvEiAYgSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gyk5WJnV1dTWWy+WY0tTnuy+Xl5djSgcHB+PBgwcDvpfAM6lPnz5NHrpdsFkKvlkOPqXj4+Px9OnTAd/LiAYgSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaLmAyb08OHDcXx8PKb0+fPnsVwuxzY7ODgYJycnY0rzuceTu3EHMalHjx6NqX358mUnAv/48eMB28SIBiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiBK4AGiBB4gSuABogQeIErgAaIEHiDKTla23maZ9S7sZIVtI/BsvU3ggf+f1w6AKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4iaDyZ3dXU1Li4uBvB9Ns8Qdyfw92C5XI7Ly8sB8HsyogGIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeIAogQeIEniAKIEHiBJ4gCiBB4gSeICoXVzZtxrTmg1gH0zdjqnPN7mdC/z19fUPY0Knp6e/XVxciDy0rdZe3tzcfBh7ZO/DtlgsTm9vb98PoGy1eTk8Pz//MPaIGTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANECTxAlMADRAk8QJTAA0QJPECUwANE7eLS7fuw9ctzgTvZy2f8P7XH8NPvNTJPAAAAAElFTkSuQmCC",Er="/id311-blob-frontend/assets/player1_side-a15d0dc7.gif",kr="/id311-blob-frontend/assets/player2_side-35d62872.gif",Cr="/id311-blob-frontend/assets/player3_side-3766455f.gif",Ir="/id311-blob-frontend/assets/player4_side-22bb227b.gif",Tr="/id311-blob-frontend/assets/player5_side-4fa46ff4.gif",Qr="/id311-blob-frontend/assets/player6_side-940dfa1f.gif",Pr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAALoSURBVHic7dyxTQJAGIBRMGwgNLR2TmHjJNbGtdzBxtYF6GwtFGbAIY7kcvne6w/uQvhyzX+bDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIzbzt7A6vb3x+vM7z9ffqb+hvXzr+5u9gaAeQQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwnazNzDb6Dz779vL0PdvPz6H1h9Om6nz+Kufv/6egBsAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhAkAhC0/C736PP9s1+enofWrn/9w+h5av/p7Am4AECYAECYAECYAECYAECYAECYAECYAECYAECYAECYAECYAECYAECYAECYAELabvYHZVp9nH1U/f50bAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAITl3wNgbe+/+8FP+L7JPlblBgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBh29kbmG1/f7yOrP97fLjVVpJG5/lfz19D68+Xn/R/wA0AwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwgQAwtKz0LdQf0/APP/a3AAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgTAAgzCz1ZLPfEzDP3+YGAGECAGECAGECAGECAGECAGECAGECAGECAGECAGECAGECAGECAGECAGECAGFmsRc3+p7AKPP8a3MDgDABgDABgDABgDABgDABgDABgDABgDABgDABgDABgDABgDABgDABgDABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYCn/Yv9H4JhTDEQAAAAASUVORK5CYII=",Sr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAALnSURBVHic7dyxTUMxFEBRgtggKVAoQGIEOlooaBiIARgrLR0jUFBARWYIQziSZd1zeuvbinLl5vniAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMZtZm9gdbvt/jTz+3/H36m/Yf38q7ucvQFgHgGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAMAGAsPws9eg8+/XN3dD3b27vh9Z/fhyG1o9a/fz19wTcACBMACBMACBMACBMACBMACBMACBMACBMACBMACBMACBMACBMACBMACBMACBs+Vno1ef5Z/v5/hpav/r56+8JuAFAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABAmABA2NXsDcy2+jz7qPr569wAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAIEwAICz/HgBre3l9Hlr/+XE4007W5AYAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYQIAYZvZG5htt92fRtY/PD6daytJo/P8729vQ+v/jr/p/4AbAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAIQJAISlZ6HPof6egHn+tbkBQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJgAQJhZ6slmvydgnr/NDQDCBADCBADCBADCBADCBADCBADCBADCBADCBADCBADCBADCBADCBADCBADCzGIvbvQ9gVHm+dfmBgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgBhAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMBS/gHOOToBorvOJgAAAABJRU5ErkJggg==";function Nr(i){let e,t,s,n,r,A,l;return t=new Qt({props:{sketch:i[1]}}),{c(){e=f("div"),Ue(t.$$.fragment),s=_(),n=f("button"),u(e,"class","missionTwoTVContainer svelte-1j1lvf0")},m(o,c){y(o,e,c),Re(t,e,null),a(e,s),a(e,n),r=!0,A||(l=Y(n,"click",i[2]),A=!0)},p:b,i(o){r||(Me(t.$$.fragment,o),r=!0)},o(o){Le(t.$$.fragment,o),r=!1},d(o){o&&v(e),He(t),A=!1,l()}}}const as=10;function Dr(i,e,t){const s=window.innerWidth-as,n=window.innerHeight-as,r=s/10,A=s/7,l=s/17,o={};let c;K.subscribe(w=>{t(0,c=w)});let p=[],h=[],d=[[],[]];c.on("broadcastMission2State",w=>{var B,I;p=w,c.emit("gotPairs");for(let T=0;T<2;T++)h.push((B=p[T])==null?void 0:B.solverNumber),h.push((I=p[T])==null?void 0:I.guiderNumber)}),c.on("submitAnswerSuccess",w=>{d[w].push(p[w].lockState)}),c.on("submitAnswerFail",w=>{}),st(()=>{c.off("broadcastPlayerStatus"),c.off("broadcastMission2State")}),console.log(o);const m={},g=w=>{let B;w.preload=function(){m.box={},m.box.open=w.loadImage(yr),m.box.closed=w.loadImage(_r),m.lock={},m.lock.active=w.loadImage(br),m.lock.unlocked=w.loadImage(wr),m.lock.pending=w.loadImage(Br),m.players=[],m.players.push(w.createImg(Er)),m.players.push(w.createImg(kr)),m.players.push(w.createImg(Cr)),m.players.push(w.createImg(Ir)),m.players.push(w.createImg(Tr)),m.players.push(w.createImg(Qr)),m.heart={},m.heart.healthy=w.loadImage(Pr),m.heart.dead=w.loadImage(Sr)},w.setup=function(){w.createCanvas(s,n),m.box.open.height/m.box.open.width,B=m.box.closed.height/m.box.closed.width},w.draw=function(){var I,T,D,H,G,j,oe,O;if(w.clear(),w.noStroke(),w.imageMode(w.CENTER),p.length!=0){for(let C=0;C<2;C++){(T=m.players[(I=p[C])==null?void 0:I.solverNumber])==null||T.size(r,r),(H=m.players[(D=p[C])==null?void 0:D.solverNumber])==null||H.position(s/2*C+r+r/2,n*.75),(j=m.players[(G=p[C])==null?void 0:G.guiderNumber])==null||j.size(r,r),(O=m.players[(oe=p[C])==null?void 0:oe.guiderNumber])==null||O.position(s/2*C+r-r/2,n*.75),w.image(m.box.closed,s/2*C+r*3.5,n*.8,A,A*B);for(let Q=0;Q<p[C].score;Q++)w.stroke("#3D3D3D"),w.strokeWeight(n/80),w.line(s/2*C+r,n*.6-1.2*l*(Q+1),s/2*C+3.5*r,n*.6-1.2*l*(Q+1)),w.image(m.lock.unlocked,s/2*C+r+d[C][Q]/100*2.5*r,n*.6-1.2*l*(Q+1),l,l);w.stroke("#3D3D3D"),w.strokeWeight(n/80),w.line(s/2*C+r,n*.6,s/2*C+3.5*r,n*.6),w.image(m.lock.active,s/2*C+r+p[C].lockState/100*2.5*r,n*.6,l,l);for(let Q=p[C].score+1;Q<3;Q++)w.stroke("#3D3D3D"),w.strokeWeight(n/80),w.line(s/2*C+r,n*.6-1.2*l*Q,s/2*C+3.5*r,n*.6-1.2*l*Q),w.image(m.lock.pending,s/2*C+r+.5*2.5*r,n*.6-1.2*l*Q,l,l);for(let Q=0;Q<p[C].lifeLeft;Q++)w.image(m.heart.healthy,s/2*C+2.25*r+(Q-2)*l,n*.15,1.5*l,1.5*l);for(let Q=p[C].lifeLeft;Q<5;Q++)w.image(m.heart.dead,s/2*C+2.25*r+(Q-2)*l,n*.15,1.5*l,1.5*l)}for(let C=0;C<6;C++)h.includes(C)||m.players[C].hide()}}},E=()=>{c.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&1&&U(async()=>{for(;!c;)await new Promise(w=>setTimeout(w,100))})},[c,g,E]}class Mr extends x{constructor(e){super(),J(this,e,Dr,Nr,R,{})}}function Rr(i){let e;return{c(){e=f("div"),e.innerHTML='<div class="card">PostMissionThree</div>'},m(t,s){y(t,e,s)},p:b,i:b,o:b,d(t){t&&v(e)}}}class Hs extends x{constructor(e){super(),J(this,e,null,Rr,R,{})}}function Hr(i){let e;return{c(){e=f("div"),e.innerHTML="Let&#39;s watch<br/> other players&#39;<br/>fantastic play",u(e,"class","clientTitle-eliminated svelte-1hte2hb")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function Jr(i){let e,t,s,n,r;return{c(){e=f("div"),e.innerHTML=`Control the flashlight <br/> by tilting the device<br/><br/>Tap the box
      to shoot`,t=_(),s=f("div"),s.innerHTML='<div class="crossHair svelte-1hte2hb"></div>',u(e,"class","clientTitle-survivor svelte-1hte2hb"),u(s,"class","shootBox svelte-1hte2hb")},m(A,l){y(A,e,l),y(A,t,l),y(A,s,l),n||(r=Y(s,"click",i[4]),n=!0)},p:b,d(A){A&&v(e),A&&v(t),A&&v(s),n=!1,r()}}}function xr(i){let e;function t(r,A){return r[1]==!0&&r[2][r[0]].alive==0?Jr:Hr}let s=t(i),n=s(i);return{c(){e=f("div"),n.c(),u(e,"class","shotClientContainer svelte-1hte2hb"),M(e,"--innerHeight",i[3])},m(r,A){y(r,e,A),n.m(e,null)},p(r,[A]){s===(s=t(r))&&n?n.p(r,A):(n.d(1),n=s(r),n&&(n.c(),n.m(e,null)))},i:b,o:b,d(r){r&&v(e),n.d()}}}function Or(i,e,t){const s=he();let n;K.subscribe(B=>{t(5,n=B)});let r=0,A=0,l,o=1,c=1,p;De.subscribe(B=>{t(0,p=B)});const h=window.innerHeight;let d=!1,m=[];n.on("start_post_mission",()=>{s("changeScene",{new_scene:Hs})}),st(()=>{window.removeEventListener("devicemotion",g),clearInterval(l)});function g(B){r=B.accelerationIncludingGravity.x,A=B.accelerationIncludingGravity.y}function E(){n.emit("sendAcceleration",r*o,A*c)}function w(){n.emit("submitShot")}return i.$$.update=()=>{i.$$.dirty&32&&U(async()=>{for(;!n;)await new Promise(B=>setTimeout(B,100));navigator.userAgent.match(/Android/i)?o=-1:navigator.userAgent.match(/iPhone/i)&&(c=-1),window.DeviceMotionEvent?(window.addEventListener("devicemotion",g),l=setInterval(E,200)):window.DeviceOrientationEvent&&(window.addEventListener("deviceorientation",g),l=setInterval(E,200)),n.on("broadcastPlayerStatus",B=>{t(1,d=!0),t(2,m=B)})})},[p,d,m,h,w,n]}class Lr extends x{constructor(e){super(),J(this,e,Or,xr,R,{})}}const Ur="/id311-blob-frontend/assets/mission3_background-d8784994.png",Kr="/id311-blob-frontend/assets/player1-a46f43d7.gif",Gr="/id311-blob-frontend/assets/player2-cd5b4515.gif",qr="/id311-blob-frontend/assets/player3-05d9bd6b.gif",zr="/id311-blob-frontend/assets/player4-4ff6f1ac.gif",Fr="/id311-blob-frontend/assets/player5-f1982da9.gif",Xr="/id311-blob-frontend/assets/player6-6ab06b64.gif",Yr="data:image/gif;base64,R0lGODlhAAEAAfcAAAAAABQTGkdNXY+aoacnUf89Pf+3KvbtA0vePDN2bCW/4jF96Uo8laVbmf6Cff7Qsf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJMgAAACwAAAAAAAEAAQAI/gABCBxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6bNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KtKnTp1CjSp1KtarVq1izat3KtavXr2DDih1LtqzZs2jTql3Ltq3bt3Djyp1Lt67du3jz6t3Lt6/fv4ADCx5MuLDhw4gTK17MuLHjx5AjS55MubLly5gza97MubPnz6BDix5NurTp06hTq17NurXr17Bjy55Nu3bCALhz697Nu7fv38B/21YYvLjx48eH30bOvDly5QidS5/eG/pB6tipWzeYvXvz7QW9/os3Dp7g+PPCywtEz363+vXt478HEF/++/rt5+Nnr3//+f7+iQdggN0NSCB2Bh44XYIKOsdgg8w9CGFy9024YIUWOohhhhFuyCGF6n34nYciBidhibydiKJuKq6IW4suwrgiaPEVYOONOOao44489uhjj/b5VeOPRBZpZJFB9jXkkUw2aWSSfC3p5JRU4gjlXlJWqWWTV+qV5ZZgEtllXl+GaeaOY+JV5pls2pjmXWu2eeabdsUpZ5h01mXnnVvmSdeefFbp51yABjrloHIVaiiX+f2l6KJHIhrXo5Ai2aiQ7VU656VKZqopnpxG6emnfYaK5aikCmqql6imeuiq/mS26iqj/Dkq66yRwqrmrbhaWium7PX66q+dBissregBRumxBUgK17LHOvsWtMJK6xa1vVrbFra4assWt7N6uxa4roqrFrmpmpsWuqSqixa7n7p7FryaymsWvZXaWxa+kOpLFr+L+jsWwIYKLBbBgRocFsJ8KgwWw3c6/BXEckrsFcVtWtwVxmxqzBXHmxIrqrHMPqkrnLyWjObJdaasco4ebwWymTFrNTOoIp9K8ss+1pzVzWD6jBXQpebM6s488yj0VURrubRVTatqdKxIJ63j01VFTSXWVGk9bLK2Vm21lSzr6bLVXBPqookkru1e227nJiOKc5dYt4h3f5g3oYd7Z9i3hX9PGDiEgzdYuIKHH5g4gYsH2Lh/j+8XOX6T11d52pLFnV6ImlcHt+aXl01b555zTjqLn8cd+tTKnf626a4HMN/stNdu++2456777rz37vvvwAcv/PDEF2/88cgnr/zyzDfv/PPQRy/99NRXb/312Gev/fbcd+/99+CHL/745Jdv/vnop6/++uy37/778Mcv//z012///fjnT1ZAACH5BAkyAAAALAAAAAAAAQABhwAAABQTGkdNXY+aoacnUf89Pf+3KvbtA0vePDN2bCW/4jF9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";function Vr(i){let e,t,s,n,r,A,l,o,c,p,h,d;return h=new Qt({props:{sketch:i[1]}}),{c(){e=f("div"),t=f("div"),s=f("div"),r=_(),A=f("div"),l=f("div"),c=_(),p=f("div"),Ue(h.$$.fragment),u(s,"class","P1 svelte-1rhax0l"),u(s,"id",n="player"+(i[0][1]+1)),M(s,"--width",window.innerWidth),u(l,"class","P2 svelte-1rhax0l"),u(l,"id",o="player"+(i[0][0]+1)),M(l,"--width",window.innerWidth),u(p,"class","lights svelte-1rhax0l"),u(e,"class","missionThreeTVContainer svelte-1rhax0l")},m(m,g){y(m,e,g),a(e,t),a(t,s),a(e,r),a(e,A),a(A,l),a(e,c),a(e,p),Re(h,p,null),d=!0},p(m,[g]){(!d||g&1&&n!==(n="player"+(m[0][1]+1)))&&u(s,"id",n),(!d||g&1&&o!==(o="player"+(m[0][0]+1)))&&u(l,"id",o)},i(m){d||(Me(h.$$.fragment,m),d=!0)},o(m){Le(h.$$.fragment,m),d=!1},d(m){m&&v(e),He(h)}}}const us=0,fs=33;function Wr(i,e,t){const s=window.innerWidth-us,n=window.innerHeight-us;let r;K.subscribe(g=>{t(2,r=g)});const A=.3*fs/200;let l,o=[];const p=setInterval(()=>{if(l!=null)for(let g of Object.values(l))g.cursorPosition.x+=g.cursorMomentum.x*A,g.cursorPosition.y+=g.cursorMomentum.y*A,g.cursorPosition.x<0&&(g.cursorPosition.x=0),g.cursorPosition.x>99&&(g.cursorPosition.x=99),g.cursorPosition.y<0&&(g.cursorPosition.y=0),g.cursorPosition.y>99&&(g.cursorPosition.y=99)},fs);st(()=>{r.off("broadcastMission3State"),clearInterval(p)});const h={},d={},m=g=>{const E=.4*s,w=.4*n,B=(s/2-E)/2,I=.05*s,T=.1*s;g.preload=function(){h.background=g.loadImage(Ur),h.player1=g.loadImage(Kr),h.player2=g.loadImage(Gr),h.player3=g.loadImage(qr),h.player4=g.loadImage(zr),h.player5=g.loadImage(Fr),h.player6=g.loadImage(Xr),h.target=g.loadImage(Yr)},g.setup=function(){g.createCanvas(s,n);const D=s/2,H=n;d.shadowGraphicsLeft=g.createGraphics(D,H),d.shadowGraphicsRight=g.createGraphics(D,H),d.targetGraphicLeft=g.createGraphics(D,H),d.targetGraphicRight=g.createGraphics(D,H),d.negativeMaskLeft=g.createGraphics(D,H),d.negativeMaskRight=g.createGraphics(D,H),d.positiveMaskLeft=g.createGraphics(D,H),d.positiveMaskRight=g.createGraphics(D,H)},g.draw=function(){if(g.clear(),d.shadowGraphicsLeft.clear(),d.shadowGraphicsRight.clear(),d.targetGraphicLeft.clear(),d.targetGraphicRight.clear(),d.negativeMaskLeft.clear(),d.negativeMaskRight.clear(),d.positiveMaskLeft.clear(),d.positiveMaskRight.clear(),o.length==0)return;d.shadowGraphicsLeft.fill("rgba(0,0,0,0.85)"),d.shadowGraphicsLeft.rect(0,0,s/2,n),d.negativeMaskLeft.background(0),d.negativeMaskLeft.erase(),d.negativeMaskLeft.noStroke(),d.negativeMaskLeft.fill(0),d.negativeMaskLeft.ellipse(E/100*l[o[0]].cursorPosition.x+B,w/100*l[o[0]].cursorPosition.y+I,T,T);const D=d.shadowGraphicsLeft.get(),H=d.negativeMaskLeft.get();D.mask(H),g.image(D,0,0),d.targetGraphicLeft.image(h.target,E/100*l[o[0]].targetPosition.x+B,w/100*l[o[0]].targetPosition.y+I,T,T),d.positiveMaskLeft.background("rgba(0,0,0,0)"),d.positiveMaskLeft.fill(0),d.positiveMaskLeft.noStroke(),d.positiveMaskLeft.ellipse(B+E/100*l[o[0]].cursorPosition.x,I+w/100*l[o[0]].cursorPosition.y,T,T);const G=d.targetGraphicLeft.get(),j=d.positiveMaskLeft.get();G.mask(j),g.image(G,0,0),d.shadowGraphicsRight.fill("rgba(0,0,0,0.85)"),d.shadowGraphicsRight.rect(0,0,s/2,n),d.negativeMaskRight.background(0),d.negativeMaskRight.erase(),d.negativeMaskRight.noStroke(),d.negativeMaskRight.ellipse(E/100*l[o[1]].cursorPosition.x+B,w/100*l[o[1]].cursorPosition.y+I,T,T);const oe=d.shadowGraphicsRight.get(),O=d.negativeMaskRight.get();oe.mask(O),g.image(oe,s/2,0),d.targetGraphicRight.image(h.target,E/100*l[o[1]].targetPosition.x+B,w/100*l[o[1]].targetPosition.y+I,T,T),d.positiveMaskRight.background("rgba(0,0,0,0)"),d.positiveMaskRight.fill(0),d.positiveMaskRight.noStroke(),d.positiveMaskRight.ellipse(B+B/100*l[o[1]].cursorPosition.x,I+w/100*l[o[1]].cursorPosition.y,T,T);const C=d.targetGraphicRight.get(),Q=d.positiveMaskRight.get();C.mask(Q),g.image(C,s/2,0),g.noFill(),g.stroke("rgb(255, 0, 255)"),g.strokeWeight(5),g.rect(B,I,E,w),g.rect(B+s/2,I,E,w)}};return i.$$.update=()=>{i.$$.dirty&5&&U(async()=>{for(;!r;)await new Promise(g=>setTimeout(g,100));r.on("broadcastMission3State",g=>{o.length===0&&t(0,o=Object.keys(g).map(E=>parseInt(E))),l=g})})},[o,m,r]}class jr extends x{constructor(e){super(),J(this,e,Wr,Vr,R,{})}}function $r(i){let e;return{c(){e=f("div"),u(e,"class","narrCard svelte-15cmk8")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function Zr(i){var P,$,Pt,St,Nt,Dt;let e,t,s,n,r,A,l,o,c,p,h,d,m,g=((P=i[0][0])==null?void 0:P.pName)+"",E,w,B,I,T,D,H,G=(($=i[0][1])==null?void 0:$.pName)+"",j,oe,O,C,Q,Z,pe,ee,ge=((Pt=i[0][2])==null?void 0:Pt.pName)+"",fe,de,le,ie,Ce,ne,te,me=((St=i[0][3])==null?void 0:St.pName)+"",ve,Be,ce,Ee,Ie,F,ye,ae,S,q,Ae,z=((Nt=i[1][0])==null?void 0:Nt.pName)+"",Se,Te,X,_e,be,re,xe,Ne=((Dt=i[1][1])==null?void 0:Dt.pName)+"",ue;return{c(){var L,W,Ye,Ve,We,je;e=f("div"),t=_(),s=f("div"),n=f("div"),r=f("div"),r.textContent="Survivors",A=_(),l=f("div"),o=f("div"),c=f("div"),p=f("div"),d=_(),m=f("div"),E=k(g),w=_(),B=f("div"),I=f("div"),D=_(),H=f("div"),j=k(G),oe=_(),O=f("div"),C=f("div"),Q=f("div"),pe=_(),ee=f("div"),fe=k(ge),de=_(),le=f("div"),ie=f("div"),ne=_(),te=f("div"),ve=k(me),Be=_(),ce=f("div"),Ee=f("div"),Ee.textContent="Eliminated",Ie=_(),F=f("div"),ye=f("div"),ae=f("div"),q=_(),Ae=f("div"),Se=k(z),Te=_(),X=f("div"),_e=f("div"),re=_(),xe=f("div"),ue=k(Ne),u(e,"class","resultCard svelte-15cmk8"),u(r,"class","pTitle svelte-15cmk8"),u(p,"class","pImage svelte-15cmk8"),u(p,"id",h="player"+String(((L=i[0][0])==null?void 0:L.pNum)+1)),M(p,"--height",window.innerHeight),u(m,"class","pName svelte-15cmk8"),u(c,"class","player"),u(I,"class","pImage svelte-15cmk8"),u(I,"id",T="player"+String(((W=i[0][1])==null?void 0:W.pNum)+1)),M(I,"--height",window.innerHeight),u(H,"class","pName svelte-15cmk8"),u(B,"class","player"),u(o,"class","pColumn"),u(Q,"class","pImage svelte-15cmk8"),u(Q,"id",Z="player"+String(((Ye=i[0][2])==null?void 0:Ye.pNum)+1)),M(Q,"--height",window.innerHeight),u(ee,"class","pName svelte-15cmk8"),u(C,"class","player"),u(ie,"class","pImage svelte-15cmk8"),u(ie,"id",Ce="player"+String(((Ve=i[0][3])==null?void 0:Ve.pNum)+1)),M(ie,"--height",window.innerHeight),u(te,"class","pName svelte-15cmk8"),u(le,"class","player"),u(O,"class","pColumn"),u(l,"class","flexUnit svelte-15cmk8"),u(n,"class","alivePlayers svelte-15cmk8"),u(Ee,"class","pTitle svelte-15cmk8"),u(ae,"class","pImage svelte-15cmk8"),u(ae,"id",S="player"+String(((We=i[1][0])==null?void 0:We.pNum)+1)),M(ae,"--height",window.innerHeight),u(Ae,"class","pName svelte-15cmk8"),u(ye,"class","player"),u(_e,"class","pImage svelte-15cmk8"),u(_e,"id",be="player"+String(((je=i[1][1])==null?void 0:je.pNum)+1)),M(_e,"--height",window.innerHeight),u(xe,"class","pName svelte-15cmk8"),u(X,"class","player"),u(F,"class","pColumn"),u(ce,"class","deadPlayers svelte-15cmk8"),u(s,"class","results svelte-15cmk8")},m(L,W){y(L,e,W),y(L,t,W),y(L,s,W),a(s,n),a(n,r),a(n,A),a(n,l),a(l,o),a(o,c),a(c,p),a(c,d),a(c,m),a(m,E),a(o,w),a(o,B),a(B,I),a(B,D),a(B,H),a(H,j),a(l,oe),a(l,O),a(O,C),a(C,Q),a(C,pe),a(C,ee),a(ee,fe),a(O,de),a(O,le),a(le,ie),a(le,ne),a(le,te),a(te,ve),a(s,Be),a(s,ce),a(ce,Ee),a(ce,Ie),a(ce,F),a(F,ye),a(ye,ae),a(ye,q),a(ye,Ae),a(Ae,Se),a(F,Te),a(F,X),a(X,_e),a(X,re),a(X,xe),a(xe,ue)},p(L,W){var Ye,Ve,We,je,Mt,Rt,Ht,Jt,xt,Ot,Lt,Ut;W&1&&h!==(h="player"+String(((Ye=L[0][0])==null?void 0:Ye.pNum)+1))&&u(p,"id",h),W&1&&g!==(g=((Ve=L[0][0])==null?void 0:Ve.pName)+"")&&se(E,g),W&1&&T!==(T="player"+String(((We=L[0][1])==null?void 0:We.pNum)+1))&&u(I,"id",T),W&1&&G!==(G=((je=L[0][1])==null?void 0:je.pName)+"")&&se(j,G),W&1&&Z!==(Z="player"+String(((Mt=L[0][2])==null?void 0:Mt.pNum)+1))&&u(Q,"id",Z),W&1&&ge!==(ge=((Rt=L[0][2])==null?void 0:Rt.pName)+"")&&se(fe,ge),W&1&&Ce!==(Ce="player"+String(((Ht=L[0][3])==null?void 0:Ht.pNum)+1))&&u(ie,"id",Ce),W&1&&me!==(me=((Jt=L[0][3])==null?void 0:Jt.pName)+"")&&se(ve,me),W&2&&S!==(S="player"+String(((xt=L[1][0])==null?void 0:xt.pNum)+1))&&u(ae,"id",S),W&2&&z!==(z=((Ot=L[1][0])==null?void 0:Ot.pName)+"")&&se(Se,z),W&2&&be!==(be="player"+String(((Lt=L[1][1])==null?void 0:Lt.pNum)+1))&&u(_e,"id",be),W&2&&Ne!==(Ne=((Ut=L[1][1])==null?void 0:Ut.pName)+"")&&se(ue,Ne)},d(L){L&&v(e),L&&v(t),L&&v(s)}}}function eA(i){let e,t,s,n,r;function A(c,p){return c[2]==0?Zr:$r}let l=A(i),o=l(i);return{c(){e=f("div"),t=f("div"),s=_(),o.c(),u(t,"class","nextBtn svelte-15cmk8"),u(e,"class","postMissionOneTVContainer svelte-15cmk8")},m(c,p){y(c,e,p),a(e,t),a(e,s),o.m(e,null),n||(r=Y(t,"click",i[3]),n=!0)},p(c,[p]){l===(l=A(c))&&o?o.p(c,p):(o.d(1),o=l(c),o&&(o.c(),o.m(e,null)))},i:b,o:b,d(c){c&&v(e),o.d(),n=!1,r()}}}function tA(i,e,t){let s;K.subscribe(o=>{t(4,s=o)});let n=[],r=[],A=0;const l=()=>{t(2,A++,A),A==2&&s.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&19&&U(async()=>{for(;!s;)await new Promise(o=>setTimeout(o,100));s.emit("get_session_id"),s.on("post_session_id",o=>{}),s.on("broadcastPlayerStatus",o=>{t(0,n=[]),t(1,r=[]);for(let c of o)c.alive==0?n.push(c):r.push(c)})})},[n,r,A,l,s]}class sA extends x{constructor(e){super(),J(this,e,tA,eA,R,{})}}function iA(i){let e;return{c(){e=f("div"),u(e,"class","narrCard svelte-1751hig")},m(t,s){y(t,e,s)},p:b,d(t){t&&v(e)}}}function nA(i){var Ie,F,ye,ae;let e,t,s,n,r,A,l,o,c,p,h,d,m,g=((Ie=i[0][0])==null?void 0:Ie.pName)+"",E,w,B,I,T,D,H,G=((F=i[0][1])==null?void 0:F.pName)+"",j,oe,O,C,Q,Z,pe,ee,ge,fe,de,le=((ye=i[1][0])==null?void 0:ye.pName)+"",ie,Ce,ne,te,me,ve,Be,ce=((ae=i[1][1])==null?void 0:ae.pName)+"",Ee;return{c(){var S,q,Ae,z;e=f("div"),t=_(),s=f("div"),n=f("div"),r=f("div"),r.textContent="Survivors",A=_(),l=f("div"),o=f("div"),c=f("div"),p=f("div"),d=_(),m=f("div"),E=k(g),w=_(),B=f("div"),I=f("div"),D=_(),H=f("div"),j=k(G),oe=_(),O=f("div"),C=f("div"),C.textContent="Eliminated",Q=_(),Z=f("div"),pe=f("div"),ee=f("div"),fe=_(),de=f("div"),ie=k(le),Ce=_(),ne=f("div"),te=f("div"),ve=_(),Be=f("div"),Ee=k(ce),u(e,"class","resultCard svelte-1751hig"),u(r,"class","pTitle svelte-1751hig"),u(p,"class","pImage svelte-1751hig"),u(p,"id",h="player"+String(((S=i[0][0])==null?void 0:S.pNum)+1)),M(p,"--height",window.innerHeight),u(m,"class","pName svelte-1751hig"),u(c,"class","player"),u(I,"class","pImage svelte-1751hig"),u(I,"id",T="player"+String(((q=i[0][1])==null?void 0:q.pNum)+1)),M(I,"--height",window.innerHeight),u(H,"class","pName svelte-1751hig"),u(B,"class","player"),u(o,"class","pColumn"),u(l,"class","flexUnit svelte-1751hig"),u(n,"class","alivePlayers svelte-1751hig"),u(C,"class","pTitle svelte-1751hig"),u(ee,"class","pImage svelte-1751hig"),u(ee,"id",ge="player"+String(((Ae=i[1][0])==null?void 0:Ae.pNum)+1)),M(ee,"--height",window.innerHeight),u(de,"class","pName svelte-1751hig"),u(pe,"class","player"),u(te,"class","pImage svelte-1751hig"),u(te,"id",me="player"+String(((z=i[1][1])==null?void 0:z.pNum)+1)),M(te,"--height",window.innerHeight),u(Be,"class","pName svelte-1751hig"),u(ne,"class","player"),u(Z,"class","pColumn"),u(O,"class","deadPlayers svelte-1751hig"),u(s,"class","results svelte-1751hig")},m(S,q){y(S,e,q),y(S,t,q),y(S,s,q),a(s,n),a(n,r),a(n,A),a(n,l),a(l,o),a(o,c),a(c,p),a(c,d),a(c,m),a(m,E),a(o,w),a(o,B),a(B,I),a(B,D),a(B,H),a(H,j),a(s,oe),a(s,O),a(O,C),a(O,Q),a(O,Z),a(Z,pe),a(pe,ee),a(pe,fe),a(pe,de),a(de,ie),a(Z,Ce),a(Z,ne),a(ne,te),a(ne,ve),a(ne,Be),a(Be,Ee)},p(S,q){var Ae,z,Se,Te,X,_e,be,re;q&1&&h!==(h="player"+String(((Ae=S[0][0])==null?void 0:Ae.pNum)+1))&&u(p,"id",h),q&1&&g!==(g=((z=S[0][0])==null?void 0:z.pName)+"")&&se(E,g),q&1&&T!==(T="player"+String(((Se=S[0][1])==null?void 0:Se.pNum)+1))&&u(I,"id",T),q&1&&G!==(G=((Te=S[0][1])==null?void 0:Te.pName)+"")&&se(j,G),q&2&&ge!==(ge="player"+String(((X=S[1][0])==null?void 0:X.pNum)+1))&&u(ee,"id",ge),q&2&&le!==(le=((_e=S[1][0])==null?void 0:_e.pName)+"")&&se(ie,le),q&2&&me!==(me="player"+String(((be=S[1][1])==null?void 0:be.pNum)+1))&&u(te,"id",me),q&2&&ce!==(ce=((re=S[1][1])==null?void 0:re.pName)+"")&&se(Ee,ce)},d(S){S&&v(e),S&&v(t),S&&v(s)}}}function rA(i){let e,t,s,n,r;function A(c,p){return c[2]==0?nA:iA}let l=A(i),o=l(i);return{c(){e=f("div"),t=f("div"),s=_(),o.c(),u(t,"class","nextBtn svelte-1751hig"),u(e,"class","postMissionOneTVContainer svelte-1751hig")},m(c,p){y(c,e,p),a(e,t),a(e,s),o.m(e,null),n||(r=Y(t,"click",i[3]),n=!0)},p(c,[p]){l===(l=A(c))&&o?o.p(c,p):(o.d(1),o=l(c),o&&(o.c(),o.m(e,null)))},i:b,o:b,d(c){c&&v(e),o.d(),n=!1,r()}}}function AA(i,e,t){let s;K.subscribe(o=>{t(4,s=o)});let n=[],r=[],A=0;const l=()=>{t(2,A++,A),A==2&&s.emit("on_next")};return i.$$.update=()=>{i.$$.dirty&19&&U(async()=>{for(;!s;)await new Promise(o=>setTimeout(o,100));s.emit("get_session_id"),s.on("post_session_id",o=>{}),s.on("broadcastPlayerStatus",o=>{t(0,n=[]),t(1,r=[]);for(let c of o)c.alive==0?n.push(c):c.alive==2&&r.push(c)})})},[n,r,A,l,s]}class oA extends x{constructor(e){super(),J(this,e,AA,rA,R,{})}}function lA(i){let e,t,s,n,r;var A=Zt;function l(o){return{}}return A&&(n=ut(A,l())),{c(){e=f("div"),t=f("div"),t.textContent="PostMissionThreeTV",s=_(),n&&Ue(n.$$.fragment),u(t,"class","card")},m(o,c){y(o,e,c),a(e,t),a(e,s),n&&Re(n,e,null),r=!0},p(o,[c]){if(A!==(A=Zt)){if(n){ps();const p=n;Le(p.$$.fragment,1,0,()=>{He(p,1)}),gs()}A?(n=ut(A,l()),Ue(n.$$.fragment),Me(n.$$.fragment,1),Re(n,e,null)):n=null}},i(o){r||(n&&Me(n.$$.fragment,o),r=!0)},o(o){n&&Le(n.$$.fragment,o),r=!1},d(o){o&&v(e),n&&He(n)}}}class cA extends x{constructor(e){super(),J(this,e,null,lA,R,{})}}function aA(i){let e,t,s;var n=i[0];function r(A){return{}}return n&&(t=ut(n,r()),t.$on("changeScene",i[2])),{c(){e=f("main"),t&&Ue(t.$$.fragment),u(e,"class","svelte-1gfs20v")},m(A,l){y(A,e,l),t&&Re(t,e,null),s=!0},p(A,[l]){if(l&1&&n!==(n=A[0])){if(t){ps();const o=t;Le(o.$$.fragment,1,0,()=>{He(o,1)}),gs()}n?(t=ut(n,r()),t.$on("changeScene",A[2]),Ue(t.$$.fragment),Me(t.$$.fragment,1),Re(t,e,null)):t=null}},i(A){s||(t&&Me(t.$$.fragment,A),s=!0)},o(A){t&&Le(t.$$.fragment,A),s=!1},d(A){A&&v(e),t&&He(t)}}}function uA(i,e,t){let s,n,r;Bt.subscribe(o=>{r=o}),n=An,U(async()=>{s=ct("https://blob-backend.herokuapp.com"),K.set(s),s.on("connect",()=>{}),s.on("disconnect",()=>{console.log("disconnected")}),s.on("message",c=>{console.log(c)}),s.on("start_pre_mission",c=>{switch(console.log("start_pre_mission",c),c.missionId){case 1:switch(r){case 0:t(0,n=cn);break;case 1:t(0,n=Ds);break}break;case 2:switch(r){case 0:t(0,n=_n);break;case 1:t(0,n=Ms);break}break;case 3:switch(r){case 0:t(0,n=Qn);break;case 1:t(0,n=Et);break}break}}),s.on("start_mission",c=>{switch(console.log("start_mission",c),c.missionId){case 1:switch(r){case 0:t(0,n=er);break;case 1:t(0,n=xn);break}break;case 2:switch(r){case 0:t(0,n=Mr);break;case 1:t(0,n=vr);break}break;case 3:switch(r){case 0:t(0,n=jr);break;case 1:t(0,n=Lr);break}break}}),s.on("start_post_mission",c=>{switch(console.log("start_post_mission",c),c.missionId){case 1:switch(r){case 0:t(0,n=sA);break;case 1:t(0,n=Rs);break}break;case 2:switch(r){case 0:t(0,n=oA);break;case 1:t(0,n=ht);break}break;case 3:switch(r){case 0:t(0,n=cA);break;case 1:t(0,n=Hs);break}break}})});function A(o){console.log(o),t(0,n=o.detail.new_scene)}return[n,A,o=>A(o)]}class fA extends x{constructor(e){super(),J(this,e,uA,aA,R,{})}}new fA({target:document.getElementById("app")});
